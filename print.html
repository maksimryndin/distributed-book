<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Distributed systems for busy engineer</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="preface.html">Preface</a></li><li class="chapter-item expanded "><a href="introduction/overview.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="introduction/network.html"><strong aria-hidden="true">1.1.</strong> Network stack</a></li><li class="chapter-item expanded "><a href="introduction/tap.html"><strong aria-hidden="true">1.2.</strong> Practice: virtual interface</a></li><li class="chapter-item expanded "><a href="introduction/network-properties.html"><strong aria-hidden="true">1.3.</strong> Unreliable network</a></li><li class="chapter-item expanded "><a href="introduction/measure-network.html"><strong aria-hidden="true">1.4.</strong> Measuring network</a></li><li class="chapter-item expanded "><a href="introduction/availability.html"><strong aria-hidden="true">1.5.</strong> Availability</a></li><li class="chapter-item expanded "><a href="introduction/decentralized.html"><strong aria-hidden="true">1.6.</strong> Distributed vs Decentralized</a></li><li class="chapter-item expanded "><a href="introduction/taste-distributed.html"><strong aria-hidden="true">1.7.</strong> Taste of distributed</a></li><li class="chapter-item expanded "><a href="introduction/exercises.html"><strong aria-hidden="true">1.8.</strong> Exercises</a></li></ol></li><li class="chapter-item expanded "><a href="established-systems/overview.html"><strong aria-hidden="true">2.</strong> Established systems</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="established-systems/erlang.html"><strong aria-hidden="true">2.1.</strong> Erlang/OTP</a></li></ol></li><li class="chapter-item expanded "><a href="consistency/overview.html"><strong aria-hidden="true">3.</strong> Consistency</a></li><li class="chapter-item expanded "><a href="computing/overview.html"><strong aria-hidden="true">4.</strong> Distributed computing</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="computing/ml_training.html"><strong aria-hidden="true">4.1.</strong> ML training</a></li></ol></li><li class="chapter-item expanded "><a href="decentralized/overview.html"><strong aria-hidden="true">5.</strong> Decentralized</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="decentralized/p2p.html"><strong aria-hidden="true">5.1.</strong> p2p networks</a></li><li class="chapter-item expanded "><a href="decentralized/blockchain.html"><strong aria-hidden="true">5.2.</strong> Blockchain</a></li><li class="chapter-item expanded "><a href="decentralized/smart-contracts.html"><strong aria-hidden="true">5.3.</strong> Smart contracts</a></li></ol></li><li class="chapter-item expanded "><a href="references.html"><strong aria-hidden="true">6.</strong> References</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Distributed systems for busy engineer</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/maksimryndin/distributed-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="preface"><a class="header" href="#preface">Preface</a></h1>
<p><em>To my girls: wife, daughter, and mom - for their patience and love</em></p>
<h2 id="who-should-read-this-book"><a class="header" href="#who-should-read-this-book">Who should read this book?</a></h2>
<p>To be honest, I don’t have vast practical experience of building distributed systems except the most popular one among web developers (hint: client-server). But a usual requirement to acquire this practical experience is some non-basic knowledge of the topic. So this is a classical “chicken-egg” problem: to work on a distributed software product you are usually required to have some related projects in your portfolio. So writing this book is a way to close these gaps.</p>
<p>Anyway I assume that readers have developed web projects and already have some experience in vertical and horizontal scaling, containerization, data races, classical algorithms and data structures. I will try at my best to introduce all used vocabulary.</p>
<p>I also do not devote any decent time for single machine patterns, as I believe you have enough working practice with them.</p>
<h2 id="why-yet-another-book-on-distributed-systems"><a class="header" href="#why-yet-another-book-on-distributed-systems">Why yet another book on distributed systems?</a></h2>
<p>I’ve read some excellent books devoted to distributed systems or related topics. Among them:</p>
<ul>
<li>Mikito Takada <a href="http://book.mixu.net/distsys/">Distributed systems: for fun and profit</a></li>
<li>Brendan Burns <a href="https://azure.microsoft.com/mediahandler/files/resourcefiles/designing-distributed-systems/Designing_Distributed_Systems.pdf">Designing Distributed Systems</a></li>
<li>Martin Kleppmann <a href="https://dataintensive.net/">Designing Data-Intensive Applications</a></li>
<li>Donne Martin <a href="https://github.com/donnemartin/system-design-primer">System design primer</a></li>
</ul>
<p>All above mentioned books have their own view on what topics and at what level should be covered. Martin Kleppman’s outstanding book (highly recommended) obviously focuses on data-related topics.</p>
<p>Despite I’ve read the books above, I had no clear mental picture and systematic view of Raft Algorithm, Lamport clocks and other distributed buzzwords. So this book tries to cover important topics (choice is subjective, of course) and to serve as a practical guide for busy engineers striving to grasp core concepts in a timely manner.</p>
<p>True understanding comes with real doing, so practice through exercises is a necessary part of learning. I have chosen Rust<sup class="footnote-reference"><a href="#disclaimer">1</a></sup> as a language to use throughout the book as I believe that Rust incorporates modern best practices and solid theoretical achievements. Experienced developers will dive without further ado. But for those who like more gradual involvement I could recommend the following excellent free resources to start with:</p>
<ul>
<li><a href="https://dhghomon.github.io/easy_rust/">Easy Rust</a></li>
<li><a href="https://doc.rust-lang.org/rust-by-example/">Rust by example</a></li>
</ul>
<h2 id="why-should-we-learn-about-distributed-systems"><a class="header" href="#why-should-we-learn-about-distributed-systems">Why should we learn about distributed systems?</a></h2>
<p>I admit that you already know the answer if you’ve started reading the book. But for the sake of completeness let’s enlist some points:</p>
<ul>
<li>modern scalable products inevitably rely on concepts discussed further. So if you want to get working experience in modern tech companies or even build your own product with highload and fault-tolerance in mind, you should grasp the basics<sup class="footnote-reference"><a href="#note">2</a></sup>;</li>
<li>expecting your software being distributed at some point in the future can radically improve your architecture decisions and even determine your preferred stack of technologies to use;</li>
<li>emerging <a href="https://en.wikipedia.org/wiki/Web3">Web 3.0</a> is build around an idea of <em>decentralization</em> which is tightly connected with <em>distributed</em>. So at least you will be able to understand underlying technologies and explore them deeper.</li>
</ul>
<p>The following goal for the book comes out of the points above - <em>get reader familiar with selected topics on distributed systems with strong emphasis on practice</em>.</p>
<h2 id="errata-typos-bugs-and-other-feedback"><a class="header" href="#errata-typos-bugs-and-other-feedback">Errata, typos, bugs and other feedback</a></h2>
<p>I am not a native English speaker so I will be glad to get any feedback on a correct usage of English grammar and phrases.
Also any suggestions, improvements, fixes are welcome. You can provide merge requests at book’s Github repository or email me at <em>{auhtor’s name}.{author’s last name}@gmail.com</em>.</p>
<h2 id="acknowledgments"><a class="header" href="#acknowledgments">Acknowledgments</a></h2>
<p>I would like to tell many kind words to people who influenced me as a software engineer during my career. First of all, the friend of mine, <a href="https://github.com/Farit">Farit Sadykov</a>, who helped me a lot to become a developer. Also my colleagues, especially <a href="https://github.com/softzilla">Pavel Antonov</a>, <a href="https://github.com/dbz-legacy">Nikolay Yurov</a>, <a href="https://github.com/lan-pnz">Vladimir Galkin</a>, Pavel Gorbunov, <a href="https://github.com/andybelov">Andrey Belov</a>, Evgeny Orlov, <a href="https://otus.ru/teacher/1300/">Ilya Zhigalko</a>, Slava Cheremushkin, <a href="https://github.com/kazhuravlev">Kirill Zhuravlev</a>, <a href="https://github.com/scherbakoviv">Ilya Scherbakov</a>, <a href="https://github.com/QAston">Dariusz Antoniuk</a>, <a href="https://github.com/ruuda">Ruud van Asseldonk</a>, <a href="https://github.com/cmm">Michael Livshin</a>.</p>
<p>Also many thanks to open source enthusiasts creating wonderful products, books, and articles, generously sharing knowledge with the rest of the world. We truly stand on the shoulders of giants.</p>
<p><em>Maksim Ryndin</em></p>
<p><em>Montenegro, 2022.</em></p>
<div class="footnote-definition" id="disclaimer"><sup class="footnote-definition-label">1</sup>
<p>This book is not affiliated with <a href="https://foundation.rust-lang.org/">Rust Foundation</a></p>
</div>
<div class="footnote-definition" id="note"><sup class="footnote-definition-label">2</sup>
<p>Being scalable doesn’t only mean software and infrastructure while adding more servers. It’s also about your team being ready to grow with growing traffic. So being prepared to go distributed is a must-have for every team member in terms of some introductory learning experience, automated pipelines and merge reviews etc.
Please watch very informative <a href="https://www.youtube.com/watch?v=hnpzNAPiC0E">presentation</a> by Lisa Guo on scaling Instagram.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<blockquote>
<p><em>The big idea is “messaging” &lt;..&gt; The key in making great and growable systems is much more to design how its modules communicate rather than what their internal properties and behaviors should be.</em> Alan Kay, creator of Smalltalk<sup class="footnote-reference"><a href="#note">1</a></sup></p>
</blockquote>
<h3 id="what-is-distributed"><a class="header" href="#what-is-distributed">What is distributed?</a></h3>
<blockquote>
<p><em>Distributed system is any system in which a number of independent interconnected computers can cooperate in order to achieve a common goal.</em>
<a href="https://www.oxfordreference.com/search?q=distributed&amp;searchBtn=Search&amp;isQuickSearch=true">Oxford Dictionary of Computer Science</a></p>
</blockquote>
<p>If we have two virtual machines (VM) with a web server on the first VM and a database server on the second one, do we consider such a system distributed? If VMs are on the same physical node, is it a distributed system?
If the web server and the database are running in separate containers and these containers are on different physical nodes, then this system is distributed. But a container orchestrator then moves both containers on the same node. Does the system of two connected containers lose its distributed flavor?</p>
<p>So there are many questions like above and <em>for the purpose of the book</em> we will follow the next definition of a distributed system.</p>
<p><strong>Distributed system is a software which has at least two components interacting with each other only by a network.</strong></p>
<p>If not otherwise specified, we will call components <em>nodes</em> and a group of connected nodes is named <em>cluster</em>.</p>
<p>Even if a network used for communication of the components for the present moment is a loopback interface (“localhost”), it can become a real network for the next deployment.</p>
<h3 id="why-we-need-make-our-software-distributed"><a class="header" href="#why-we-need-make-our-software-distributed">Why we need make our software distributed?</a></h3>
<p>At least, to make it highly <a href="introduction/./availability.html">available</a> at the cost of an increased complexity and managing effort.</p>
<h3 id="overview-of-the-book"><a class="header" href="#overview-of-the-book">Overview of the book</a></h3>
<p>TODO</p>
<div class="footnote-definition" id="note"><sup class="footnote-definition-label">1</sup>
<p><a href="http://wiki.c2.com/?AlanKayOnMessaging">Re: prototypes vs classes was: Re: Sun’s HotSpot</a></p>
</div>
<div class="footnote-definition" id="graph"><sup class="footnote-definition-label">2</sup>
<p>In this case we have a complete graph, so every node has connections with other <code>n-1</code> nodes. That’s we have <code>n*(n-1)</code> edges but as we count every edge twice, total number of edges is <code>n*(n-1)/2</code>.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="network-stack"><a class="header" href="#network-stack">Network stack</a></h1>
<p>Our <a href="introduction/./introduction/overview.html">definition</a> of a distributed system mentions a network as a medium for communication. This medium is a very interesting and complex subject per se but here we only review some core concepts relevant to our study.</p>
<p>Physically nodes (or hosts, think, computers) in the network are connected by means of <em>network interface</em> controllers (NIC, also <em>network adapter</em>) - a special hardware<sup class="footnote-reference"><a href="#virtual_interface">1</a></sup> allowing a computer to connect to the network via a cable (Ethernet) or a radio (WiFi)<sup class="footnote-reference"><a href="#packet_switching">2</a></sup>. This physical layer is called a <em>link</em> in TCP/IP stack<sup class="footnote-reference"><a href="#tcpip">3</a></sup>. Nodes at the link layer are identified by Media Access Control Address (MAC) - a unique hardware identifier of every <strong>network interface</strong> of the host<sup class="footnote-reference"><a href="#mac">4</a></sup>.</p>
<p>We can use <code>ifconfig</code> (or more modern <code>ip addr</code> and <code>ip link show</code>) utility to manage network interfaces. We just describe the most common data:</p>
<ul>
<li><code>&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;</code> means that the interface supports broadcasting and multicasting, is loaded (<code>UP</code> as opposite to <code>DOWN</code>), is ready to accept connections (<code>RUNNING</code>). Other popular options are <code>LOOPBACK</code> (it is a loopback interface) and <code>PROMISC</code> (interface is in the promiscuous mode when it captures all packets in the network).</li>
<li><code>mtu 1500</code> - Maximum Transmission Unit is 1500 bytes. So IP packet greater than 1500 bytes will be fragmented.</li>
<li><code>ether bc:d0:74:ec:76:17</code> means MAC is <code>bc:d0:74:ec:76:17</code></li>
<li><code>inet 192.168.43.174 netmask 0xffffff00 broadcast 192.168.43.255</code> means IPv4 address 192.168.43.174 with network mask 255.255.255.0 so we can have hosts 192.168.43.1-254, 192.168.43.255 is a broadcast address and 192.168.43.0 is the network itself.</li>
<li><code>inet6 fe80::88f:5ab4:1ad8:eed5 prefixlen 64 secured scopeid 0xe</code> means IPv6 address <code>fe80::88f:5ab4:1ad8:eed5</code></li>
</ul>
<p>So we have a network of nodes (also called LAN - local area network<sup class="footnote-reference"><a href="#LAN">5</a></sup>). How do we <strong>inter</strong>connect <strong>net</strong>works (to get WAN - wide area network) so that we can send a packet with data (called a <strong>datagram</strong>) between two hosts from different networks? Here a <em>routing</em> problem arises. Computers called <em>routers</em><sup class="footnote-reference"><a href="#bridge">6</a></sup> are relaying datagrams from source to destination accross networks borders<sup class="footnote-reference"><a href="#hop">7</a></sup>. But how do we distinguish a host in one network from a host from another network? We need some <em>addressing</em> at an <em>internet layer</em>. IPv4 addressing assigns each host an IP address of the form xx.xx.xx.xx (4 octets of 8 bits each). But with 2^32 unique IP addresses we cannot mark all hosts so IPv6 was developed (128 bits). IPv4 address exaustion was partially mitigated by so called Network Address Translation (NAT) and private IPs<sup class="footnote-reference"><a href="#private_ips">8</a></sup> which results in violation of the end-to-end principle<sup class="footnote-reference"><a href="#end2end">9</a></sup>. Current adoption of IPv6 you can check with <a href="https://www.google.com/intl/en/ipv6/statistics.html">Google data</a>.
Internet layer is independent of the network topology and the physical way of hosts connection.</p>
<p>Within LAN we need to establish a mapping between an IP addresses of hosts and their corresponding hardware addresses (MAC) to send packet from one host to another. Such a mapping is called ARP table (or ARP cache) and is filled at each host with an Address Resolution Protocol (ARP) broadcast messages. In Linux/Unix ARP table can be manipulated with an <code>arp</code> utility. For IPv6 Neighbor Discovery Protocol handles that.</p>
<p>Routing is mapping of IP addresses to interfaces and can be displayed with <code>netstat -rn</code>. You can trace packet path with <code>tracepath</code>.</p>
<p>After we identified a route between to hosts, we can use a <em>transport</em> protocol to, at least, specify <strong>ports</strong> on hosts to connect specific <em>application</em> processes running on hosts involved. Because internet layer is only responsible for routing and for reliability of communication, transport layer’s protocols can also offer some reliability mechanisms like congestion control, preserves data ordering, eliminate packet loss, provides packet deduplication.</p>
<p>So we have a connection between hosts and we can exchange application data over the transport protocol.</p>
<div class="footnote-definition" id="virtual_interface"><sup class="footnote-definition-label">1</sup>
<p>Network interface can also be virtual to allow userspace applications to intercept raw packets (see <a href="https://www.kernel.org/doc/Documentation/networking/tuntap.txt">Universal TUN/TAP device driver</a>). Also the famous loopback interface (127.0.0.1 for IPv4 and ::1 for IPv6) is virtual.</p>
</div>
<div class="footnote-definition" id="packet_switching"><sup class="footnote-definition-label">2</sup>
<p>we consider only <a href="https://en.wikipedia.org/wiki/Packet_switching">packet networks</a> where the same communication channel can be shared between several communication sessions by means of packetizing data. In contrast, in <a href="https://en.wikipedia.org/wiki/Circuit_switching">circuit networks</a> (for example, public switched telephone network, PSTN) the channel capacity is completely used only by a single communication session between two nodes.</p>
</div>
<div class="footnote-definition" id="tcpip"><sup class="footnote-definition-label">3</sup>
<p>Note that common reference to TCP/IP stack (also called <strong>Internet protocol suite</strong>) includes not only Internet Protocol and Transmission Control Protocol (TCP) but also other protocols such as a User Datagram Protocol (UDP) and QUIC at a transport layer and Internet Protocol Security (IPSec) at an internet layer. TCP/IP stack as a practical network stack predates the OSI theoretical model for general networks.
Since the adoption of TCP/IP in ARPANET in 1983 several proprietary implementations of the stack for different operating systems emerged. But the TCP/IP popularity increased when the University of California at Berkley had open sourced its implementation for BSD Unix becoming famous BSD sockets (see <a href="https://en.wikipedia.org/wiki/Internet_protocol_suite">Wikipedia Internet protocol suite</a>). Among alternatives to TCP/IP were <a href="https://en.wikipedia.org/wiki/IPX/SPX">IPX/SPX</a> and <a href="https://en.wikipedia.org/wiki/AppleTalk">AppleTalk</a>.</p>
</div>
<div class="footnote-definition" id="mac"><sup class="footnote-definition-label">4</sup>
<p>Many network interface controllers allow to overwrite its MAC. In this case the MAC should be unique within the network where the NIC lives. Moreover, software defined MACs are used in VM managed by hypervisors such as QEMU and MAC randomization is gaining popularity to avoid mobile device tracking (see <a href="https://en.wikipedia.org/wiki/MAC_address#Usage_in_hosts">Wikipedia MAC address</a>)</p>
</div>
<div class="footnote-definition" id="LAN"><sup class="footnote-definition-label">5</sup>
<p>the main criteria here is that nodes are physically located nearby. See also <a href="https://iximiuz.com/en/posts/computer-networking-101/">Computer Networking Introduction: Ethernet and IP (Heavily Illustrated)</a> by Ivan Velichko</p>
</div>
<div class="footnote-definition" id="bridge"><sup class="footnote-definition-label">6</sup>
<p>Do not confuse with <a href="https://en.wikipedia.org/wiki/Network_bridge">network bridges</a>. Routers allow separate networks to communicate while bridges join networks making them a single network. While routers interconnect networks at the internet layer, a <em>gateway</em> is a more general term - gateways can interconnect PSTN (Public switched telephone network) and VoIP network acting as <a href="https://en.wikipedia.org/wiki/VoIP_gateway">VoIP gateway</a> or even the internet and satellites orbiting Earth acting as <a href="https://en.wikipedia.org/wiki/Gateway_(telecommunications)#Internet-to-orbit_gateway">Internet-to-orbit gateway</a>. A default gateway is the destination of IP packets if the destination IP of the packet doesn’t belong to the network mask.</p>
</div>
<div class="footnote-definition" id="hop"><sup class="footnote-definition-label">7</sup>
<p>When a packet crosses a border of networks it is called a <em>hop</em>. The time-to-live (TTL) in IPv4 (and <em>hop limit</em> in IPv6) prevents infinite cycling of an IP packet between networks as it is decreased by 1 at every router the packet visits.</p>
</div>
<div class="footnote-definition" id="private_ips"><sup class="footnote-definition-label">8</sup>
<p>Private IPs are <a href="https://datatracker.ietf.org/doc/html/rfc1918#section-3">defined</a> to belong to the following subnets: 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16. Number after the slash is the <em>network prefix</em> (<a href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing">CIDR notation</a>) and denotes number of bits which is common for all hosts in the network. So, for example, 192.168.0.0/16 means that the first 16 bits are the same for all hosts and 192.168 in decimal and the rest 16 bits of total 32 bits define the host (2^16 possible addresses in the network). To be correct, the total number of possible addresses should be decreased by two as all binary zeroes hosts denotes the network itself, while all binary ones host is the broadcast address. So when you encounter an ip 192.168.12.134, you already know that this ip is not reachable publicly (from the Internet), it is some internal private host.
For IPv6 private ip address is not desirable because its main goal is to provide globally unique addressing. So for the LAN use a <a href="https://datatracker.ietf.org/doc/html/rfc4193"><em>unique local unicast address</em></a> starts with a prefix <code>fd</code> (8 bits), then 40 bits of global id (choosen randomly by the operator of the network), then 16 bits for a subnet and the rest 64 bits define the host. So with IPv6 local private ips are essentially globally unique if 40 bits of global id indeed are random and this global uniqueness of local addresses allows to merge two networks without reassigning addresses or using NATs. For IPv6 there is no broadcast - there is only a multicast - when packets are received only by hosts which declared an interest in specific packets.</p>
</div>
<div class="footnote-definition" id="end2end"><sup class="footnote-definition-label">9</sup>
<p><a href="https://en.wikipedia.org/wiki/End-to-end_principle">End-to-end principle</a> means that end hosts themselves (and not other parties) participating in the communication are responsible for communication reliability and security. Lower routing layer is <a href="https://en.wikipedia.org/wiki/Connectionless_communication">connectionless</a>, i.e. each packet goes its own route rather than a prearranged one. Interesting fact: the principle was pioneered by <a href="https://en.wikipedia.org/wiki/CYCLADES">CYCLADES</a> - an INRIA network started the same time as the well-known ARPANET.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="practice-virtual-interface"><a class="header" href="#practice-virtual-interface">Practice: virtual interface</a></h1>
<p>As we already discussed, at the link layer of TCP/IP we have network interfaces allowing us to interact with a network devices. But this network devices can be completely virtual allowing a userspace program interact with a network<sup class="footnote-reference"><a href="#userspace_tcpip">1</a></sup> at the link layer (TAP device) and the internet layer (TUN device) which is used in different tunneling programs like vpns. You can create such interfaces with console commands (like <code>ip tuntap</code>) but let’s try to create a TAP device programmaticaly. There <a href="https://www.kernel.org/doc/Documentation/networking/tuntap.txt">C examples</a> but let’s do it in Rust from scratch<sup class="footnote-reference"><a href="#tcpip_tutorial">2</a></sup>.</p>
<p>We create rust workspace (a collection of several packages) to have some experiments with the network in further chapters (you can find all the code in the <a href="https://github.com/maksimryndin/netstack">netstack repository</a>).</p>
<pre><code class="language-bash ignore">$ mkdir netstack
$ cd netstack
</code></pre>
<p>In the <code>netstack</code> directory we create <code>Cargo.toml</code> with the contents:</p>
<pre><code class="language-toml ignore">[workspace]

members = [
    "virtual-interface",
    "bindings",
]
</code></pre>
<p>After we create libs running <code>cargo new --lib virtual-interface</code> and <code>cargo new --lib bindings</code> in the <code>netstack</code> directory. So to create a virtual network device, we need to open for a read-write access file <code>/dev/net/tun</code> and configure it with <code>ioctl</code> - a swiss knife of device management in Unix/Linux. Essentialy, <code>ioctl</code> as a universal system call (please see <code>man ioctl</code>) was created to control different devices and be extensible to manage new types of devices. To achieve this goal <code>ioctl</code> accepts an open file descriptor (device), a request code - unsigned long number which is <a href="https://www.kernel.org/doc/Documentation/ioctl/ioctl-number.txt">unique across devices</a> and it can accept a pointer to some datastructure related to the specific device. In our case of a network device (TAP device) such a control structure is <code>ifreq</code> (<em>interface request</em>, see <code>man 7 netdevice</code>) and a request code is <code>TUNSETIFF</code>.</p>
<p>Rust provides <a href="https://crates.io/crates/libc">libc</a> crate as raw ffi bindings for system libraries so we could use <a href="https://rust-lang.github.io/libc/aarch64-unknown-linux-gnu/doc/libc/fn.ioctl.html">ioctl</a> and some constants but it is missing constants for TUN and TAP devices. So anyway as we need to create some bindings ourselves let use <a href="https://crates.io/crates/bindgen">bindgen</a> crate to generate bindings for system libraries at the build time. Following <a href="https://rust-lang.github.io/rust-bindgen/tutorial-0.html">bidngen tutorial</a> we create a <code>netstack/bindings/wrapper.h</code> file where we place necessary headers:</p>
<pre><code class="language-c ignore">#include &lt;sys/ioctl.h&gt;
#include &lt;linux/if.h&gt;
#include &lt;linux/if_tun.h&gt;
</code></pre>
<p>and create <code>bindings/build.rs</code> with the contents</p>
<pre><code class="language-rust ignore">extern crate bindgen;

use std::env;
use std::path::PathBuf;

fn main() {
    // Tell cargo to invalidate the built crate whenever the wrapper changes
    println!("cargo:rerun-if-changed=wrapper.h");

    // The bindgen::Builder is the main entry point
    // to bindgen, and lets you build up options for
    // the resulting bindings.
    let bindings = bindgen::Builder::default()
        // The input header we would like to generate
        // bindings for.
        .header("wrapper.h")
        // Tell cargo to invalidate the built crate whenever any of the
        // included header files changed.
        .parse_callbacks(Box::new(bindgen::CargoCallbacks))
        // Finish the builder and generate the bindings.
        .generate()
        // Unwrap the Result and panic on failure.
        .expect("Unable to generate bindings");

    // Write the bindings to the $OUT_DIR/bindings.rs file.
    let out_path = PathBuf::from(env::var("OUT_DIR").unwrap());
    bindings
        .write_to_file(out_path.join("bindings.rs"))
        .expect("Couldn't write bindings!");
}</code></pre>
<p>Run <code>cargo build</code> and at <code>target/debug/build/bindings-.../out/bindings.rs</code> we can find needed bindings except <code>TUNSETIFF</code> which is a required request code for <code>ioctl</code> (bindgen <a href="https://github.com/rust-lang/rust-bindgen/issues/753">do not generate bindings for functional macros</a>) so if we check contents of <code>/usr/include/linux/if_tun.h</code> then we see <code>TUNSETIFF</code> is a functional macro <code>#define TUNSETIFF _IOW('T', 202, int)</code> so let’s port the C macro code from <code>/usr/include/asm-generic/ioctl.h</code> where participating macros live.</p>
<p>In <code>netstack/bindings/src/lib.rs</code></p>
<pre><code class="language-rust ignore">include!(concat!(env!("OUT_DIR"), "/bindings.rs"));
use std::mem;
use std::os::raw;

// /usr/include/asm-generic/ioctl.h
const IOC_SIZEBITS: u8 = 14;
const IOC_NRBITS: u8 = 8;
const IOC_TYPEBITS: u8 = 8;
const IOC_NRSHIFT: u8 = 0;
const IOC_TYPESHIFT: u8 = IOC_NRSHIFT + IOC_NRBITS;
const IOC_SIZESHIFT: u8 = IOC_TYPESHIFT + IOC_TYPEBITS;
const IOC_DIRSHIFT: u8 = IOC_SIZESHIFT + IOC_SIZEBITS;
const IOC_WRITE: u32 = 1;

//#define TUNSETIFF     _IOW('T', 202, int)
const INT_SIZE: usize = mem::size_of::&lt;raw::c_int&gt;();
pub const TUNSETIFF: u32 = IOC_WRITE &lt;&lt; IOC_DIRSHIFT
    | (b'T' as u32) &lt;&lt; IOC_TYPESHIFT
    | 202 &lt;&lt; IOC_NRSHIFT
    | (INT_SIZE as u32) &lt;&lt; IOC_SIZESHIFT;</code></pre>
<p>Let’s add file <code>netstack/virtual-interface/src/tap.rs</code> where main things happen</p>
<pre><code class="language-rust ignore">use std::ffi;
use std::fs::{File, OpenOptions};
use std::io;
use std::mem;
use std::os::unix::io::{FromRawFd, IntoRawFd};

use bindings;

const VIRTUAL_DEVICE: &amp;str = "/dev/net/tun";

#[derive(Debug)]
pub enum VirtualInterfaceError {
    IoError(io::Error),
    IoctlError,
    DeviceNameTooLong,
    DeviceNameContainsNulByte(ffi::NulError),
}

impl From&lt;io::Error&gt; for VirtualInterfaceError {
    fn from(error: io::Error) -&gt; Self {
        VirtualInterfaceError::IoError(error)
    }
}

impl From&lt;ffi::NulError&gt; for VirtualInterfaceError {
    fn from(error: ffi::NulError) -&gt; Self {
        VirtualInterfaceError::DeviceNameContainsNulByte(error)
    }
}

pub struct VirtualInterface {
    device: File,
}

impl VirtualInterface {
    pub fn create(name: &amp;str) -&gt; Result&lt;Self, VirtualInterfaceError&gt; {
        // reserve 1 byte for '\0'
        if name.len() &gt;= bindings::IFNAMSIZ as usize {
            return Err(VirtualInterfaceError::DeviceNameTooLong);
        }
        // We have to check that the device name has no zero bytes in the middle
        let device_name = ffi::CString::new(name)?.into_bytes_with_nul();
        let device = OpenOptions::new()
            .read(true)
            .write(true)
            .open(VIRTUAL_DEVICE)?;
        // ifreq is a structure to control network device (see man 7 netdevice)
        let mut ifr: bindings::ifreq = unsafe { mem::zeroed() };

        // create stack allocated array to hold the device name
        let mut name_buffer = [0_u8; bindings::IFNAMSIZ as usize];
        // and copy name bytes to it
        for (i, b) in device_name.into_iter().enumerate() {
            name_buffer[i] = b;
        }
        ifr.ifr_ifrn.ifrn_name = name_buffer;
        // IFF_TAP - tap device
        // IFF_NO_PI - no additional info for Ethernet package
        // IFF_TUN_EXCL - prevent creation of duplicates
        ifr.ifr_ifru.ifru_flags = (bindings::IFF_TAP | bindings::IFF_NO_PI | bindings::IFF_TUN_EXCL)
            as std::os::raw::c_short;

        let raw_fd = device.into_raw_fd();
        if unsafe { bindings::ioctl(raw_fd, bindings::TUNSETIFF as u64, &amp;mut ifr as *mut _) } == -1
        {
            return Err(VirtualInterfaceError::IoctlError);
        }
        let device = unsafe { File::from_raw_fd(raw_fd) };
        Ok(Self { device })
    }

    pub fn device(&amp;mut self) -&gt; &amp;mut File {
        &amp;mut self.device
    }
}</code></pre>
<p>and import it inside <code>netstack/virtual-interface/src/lib.rs</code>:</p>
<pre><code class="language-rust ignore">pub mod tap;</code></pre>
<p>To test the code let’s start with an example <code>netstack/virtual-interface/examples/read_loop.rs</code></p>
<pre><code class="language-rust ignore">use std::io::Read;
use virtual_interface::tap::VirtualInterface;

fn main() {
    let mut interface = VirtualInterface::create("dev0").unwrap();
    let mut buffer = [0; 4096];
    println!("starting read loop for device `dev0`");
    loop {
        let n = interface.device().read(&amp;mut buffer[..]).unwrap();
        println!("The bytes: {:?}", &amp;buffer[..n]);
    }
}</code></pre>
<p>and build and run it:</p>
<pre><code class="language-bash ignore">$ cargo build --example read_loop
$ ./target/debug/examples/read_loop
</code></pre>
<p>Oh, no some ioctl error: <code>thread 'main' panicked at 'called Result::unwrap() on an Err value: IoctlError'</code>. Let’s debug with strace.</p>
<pre><code class="language-bash ignore">$ strace ./target/debug/examples/read_loop
...
ioctl(3, TUNSETIFF, 0xffffce5f30e0)     = -1 EPERM (Operation not permitted)
...
</code></pre>
<p>So it complains about permissions. Yes, checking <code>man 7 netdevice</code> again</p>
<blockquote>
<p>If an ioctl is marked as privileged, then using it requires an effective user ID of 0  or  the CAP_NET_ADMIN capability.  If this is not the case, EPERM will be returned.</p>
</blockquote>
<p>So let’s try with <code>sudo ./target/debug/examples/read_loop</code> and check if the inerface is created in another terminal:</p>
<pre><code class="language-bash ignore">$ ip link show dev0
dev0: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/ether b2:24:f3:9a:71:c1 brd ff:ff:ff:ff:ff:ff
</code></pre>
<p>It works!<sup class="footnote-reference"><a href="#ip_cli">3</a></sup> But how our binary knows how to call <code>libc</code> functions and use <code>libc</code> structs? Rust dynamically links some system libraries and <code>libc</code> is among them:</p>
<pre><code class="language-bash ignore">$ ldd ./target/debug/examples/read_loop
linux-vdso.so.1 (0x0000ffffb2199000)
libgcc_s.so.1 =&gt; /lib/aarch64-linux-gnu/libgcc_s.so.1 (0x0000ffffb20c0000)
libc.so.6 =&gt; /lib/aarch64-linux-gnu/libc.so.6 (0x0000ffffb1f10000)
/lib/ld-linux-aarch64.so.1 (0x0000ffffb2160000)
</code></pre>
<p>So our <code>netstack/bindings</code> works as expected.</p>
<p>Now you can think that giving <code>sudo</code> access to the program is probably too much power and you’re right. And Linux comes to resque with its capabilities<sup class="footnote-reference"><a href="#capabilities">4</a></sup> system allowing to provide grains of superuser power. So we need to provide only <code>CAP_NET_ADMIN</code> capability to our program. From <code>man capabilities</code>:</p>
<pre><code class="language-ignore">CAP_NET_ADMIN
    Perform various network-related operations:
    * interface configuration;
    * administration of IP firewall, masquerading, and accounting;
    * modify routing tables;
    * bind to any address for transparent proxying;
    * set type-of-service (TOS);
    * clear driver statistics;
    * set promiscuous mode;
    * enabling multicasting;
</code></pre>
<p>Note: if a filesystem with your compiled binary is mounted with <code>nosuid</code> flag (for example, a home directory is encrypted - you can check the flag for a home directory with the command <code>mount | grep $USER</code>) then you should copy the binary to some other directory which filesystem has not <code>nosuid</code> flag.</p>
<pre><code class="language-bash ignore">$ sudo setcap cap_net_admin=eip target/debug/examples/read_loop
</code></pre>
<p>Now let’s run our example binary. In another terminal run <code>ip link show dev0</code> and check that the interface is down, so let’s make it up with <code>sudo ip link set dev0 up</code>. Now we can see some bytes in the console and our next task is to decode them.</p>
<div class="footnote-definition" id="userspace_tcpip"><sup class="footnote-definition-label">1</sup>
<p>Actually offloading network stack to a userspace in traditional heavy-kernel OSes (as opposed to so called microkernel OSes) can bring performance boost - see for example <a href="https://github.com/Xilinx-CNS/onload">OpenOnload</a>.</p>
</div>
<div class="footnote-definition" id="tcpip_tutorial"><sup class="footnote-definition-label">2</sup>
<p>Many of the practice in this chapter is inspired by an excellent <a href="http://www.saminiir.com/lets-code-tcp-ip-stack-1-ethernet-arp/">Let’s code a TCP/IP stack, 1: Ethernet &amp; ARP</a> tutorial by <a href="https://github.com/saminiir">Sami Niiranen</a>.</p>
</div>
<div class="footnote-definition" id="capabilities"><sup class="footnote-definition-label">4</sup>
<p>Comprehensive overview of Linux capabilities and different related exploits can be found at <a href="https://book.hacktricks.xyz/linux-hardening/privilege-escalation/linux-capabilities">Linux Capabilities</a> by Carlos Polop.</p>
</div>
<div class="footnote-definition" id="ip_cli"><sup class="footnote-definition-label">3</sup>
<p>We could create a TAP device with the command <code>sudo ip tuntap add dev0 mode tap</code>. The only difference with our programmatically created device is that our device is not persistent - it lives while our process lives. To make our device persistent we could just add the flag <code>IFF_PERSIST</code> to <code>ifru_flags</code>.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unreliable-network"><a class="header" href="#unreliable-network">Unreliable network</a></h1>
<p>A network of interconnected computers is based on some physical layer (Ethernet cables or radio in case of wireless networks)<sup class="footnote-reference"><a href="#osi">1</a></sup>. The physical layer itself is subject to different disruptions, noisiness, and other problems. So we always have to assume that <strong>the network is unreliable</strong> and implement different <em>retry, ordering, and healthcheck policies</em> in our services.</p>
<p>Moreover, network capacity is limited and we should estimate ahead what an amount of data the system under development is going to send through the network.</p>
<blockquote>
<p><strong>Network throughput</strong> is an <em>amount of data that can be transferred through a network within a certain time period</em>
<a href="https://www.oxfordreference.com/search?q=network+throughput&amp;searchBtn=Search&amp;isQuickSearch=true">Oxford Dictionary of the Internet (4 ed.)</a>.</p>
</blockquote>
<p>We can measure a network throughput in bits per second (bit/s or bps) or even in data packets per a unit of time.</p>
<blockquote>
<p><em>Stop&amp;Think</em>: How do you measure a network throughput? How do you estimate a maximum throughput (also called <em>bandwidth</em> or <em>channel capacity</em>) of a network?<sup class="footnote-reference"><a href="#goodput">2</a></sup></p>
</blockquote>
<p>Congestion control algorithms https://cloud.google.com/blog/products/networking/tcp-bbr-congestion-control-comes-to-gcp-your-internet-just-got-faster
https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/net/ipv4/tcp_bbr.c</p>
<p>https://cacm.acm.org/magazines/2017/2/212428-bbr-congestion-based-congestion-control/fulltext</p>
<p>https://dl.acm.org/doi/10.1145/52324.52356</p>
<p>https://github.com/google/bbr</p>
<p>Typical interservice communication within a corporate network often causes to think that the communication is almost instanteneous. But in case of a world wide internet connection spanning several networks the time to deliver data significantly increases.</p>
<blockquote>
<p><strong>Network latency</strong> is <em>the time taken for a given signal or data packet to propagate through a circuit or network from its source point to its destination</em>
<a href="https://www.oxfordreference.com/search?q=network+latency&amp;searchBtn=Search&amp;isQuickSearch=true">Oxford Dictionary of Electronics and Electrical Engineering (5 ed.)</a></p>
</blockquote>
<p>Network latency usually measured from source to destination and back constituting the so called <em>round trip time (RTT)</em> which is rougly speaking a double latency.<sup class="footnote-reference"><a href="#ping">3</a></sup></p>
<p>Caching, keep-alive connections, geoghraphical proximity to the users are among usual options to decrease latency<sup class="footnote-reference"><a href="#os">4</a></sup>.</p>
<p><strong>Network partition</strong> happens if some nodes of a cluster in a distributed system cannot communicate due to a network failure but are supposed to.</p>
<p>So for a distributed system it is absolutely necessary to handle different network failures (which are quite common):</p>
<ul>
<li>meet bandwith requirements and handle network congestion on scaling;</li>
<li>deal with increased latencies;</li>
<li>have policies for network partitions: if a network partition creates two and more subclusters and such subclusters can behave independently (situation known as a <em>split-brain</em><sup class="footnote-reference"><a href="#rabbitmq">5</a></sup>), how should the system evolve and finally merge conflicting states?</li>
<li>implement backpressure</li>
</ul>
<div class="footnote-definition" id="osi"><sup class="footnote-definition-label">1</sup>
<p>Most of us have heard about <a href="https://en.wikipedia.org/wiki/OSI_model">OSI model</a> as a theoretical framework to discuss networking stack. Just for reference:</p>
</div>
<ul>
<li>L1 - Physical layer (bits)</li>
<li>L2 - Data link (frames)</li>
<li>L3 - Network (packets)</li>
<li>L4 - Transport (datagrams)</li>
<li>L5 - Session (data)</li>
<li>L6 - Presentation (data)</li>
<li>L7 - Application (data)</li>
</ul>
<div class="footnote-definition" id="goodput"><sup class="footnote-definition-label">2</sup>
<p>Also note that the maximum throughput is not actually an upper limit for <em>application specific data</em> throughput as there is always an overhead of a latency, protocols, encryption, compression, packet retransmission etc. A <strong>useful</strong> data throughput is sometimes called a <em>goodput</em> (see also <a href="https://en.wikipedia.org/wiki/Goodput">Wikipedia Goodput</a>).</p>
</div>
<div class="footnote-definition" id="ping"><sup class="footnote-definition-label">3</sup>
<p>An actual latency measurement is complicated by the presence of several nodes in the packet way, queuing (several packets from different sources to the same destination are put in a waiting list to send) on the gateway, processing delays. Tools like a famous <em>ping</em> can use special control protocols (such as ICMP) which differ from those protocols that you actually use for data (such as TCP) so measurements are biased.</p>
</div>
<div class="footnote-definition" id="os"><sup class="footnote-definition-label">4</sup>
<p>Analyzing your application stack and CPU/IO profile can also help to choose an appropriate operating system if it is possible - see benchmarks <a href="https://www.phoronix.com/scan.php?page=article&amp;item=bsd-linux-eo2021&amp;num=1">Benchmarks: FreeBSD 13 vs. NetBSD 9.2 vs. OpenBSD 7 vs. DragonFlyBSD 6 vs. Linux</a></p>
</div>
<div class="footnote-definition" id="rabbitmq"><sup class="footnote-definition-label">5</sup>
<p><a href="https://www.rabbitmq.com/partitions.html">Clustering and Network Partitions</a></p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="create-your-own-tool-to-measure-network-throughput"><a class="header" href="#create-your-own-tool-to-measure-network-throughput">Create your own tool to measure network throughput</a></h1>
<p>Here we will create our own Rust version of iperf3 to better understand concepts around network</p>
<p>https://github.com/esnet/iperf</p>
<p>Wireshark/ to analyze packets</p>
<p>Write our own DPI (nDPI, goodbyeDPI)</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="availability"><a class="header" href="#availability">Availability</a></h1>
<p>Availability in the common practice is understood as a metric rather than a property of the system. While in the theory of distributed systems (especially, CAP theorem<sup class="footnote-reference"><a href="#kleppmann">1</a></sup>) it is more about property leading to confusion.</p>
<p>We will follow practical considerations and under availability will understand the following concepts.</p>
<blockquote>
<p><em>A service level indicator (SLI) is a carefully defined quantitative measure of some aspect of the level of service that is being provided. It is a metric, not a target.</em><sup class="footnote-reference"><a href="#gcp">2</a></sup></p>
</blockquote>
<p>For example, it can be a ratio of successfully handled requests.</p>
<blockquote>
<p><em>A service level objective (SLO) specifies a target level for the reliability of your service. The SLO is a target value for an SLI.</em><sup class="footnote-reference"><a href="#gcp">2</a></sup></p>
</blockquote>
<p>Service Level Agreement (SLA) declares your commitment to satisfy SLO.
SLO also determines your <em>error budget</em>, i.e. duration of the <a href="https://uptime.is/">allowed downtime</a> within different time periods</p>
<p>Going distributed is just one of the ways to strengthen availability via adding scalabity and redundancy.</p>
<p>While network being a primary source of failures for distributed systems, we should also take into consideration other resources related to a single node:</p>
<ul>
<li>Storage (disks are corrupted, drivers contain bugs, various filesystems have different memory orderings models and are mounted with different policies<sup class="footnote-reference"><a href="#files-are-hard">3</a></sup>)</li>
<li>CPU (processes are stopped while VM is migrated, system clocks may drift etc, cpu usage patterns, align with branch prediction and caches sizes)</li>
<li>Memory (can be corrupted, defragmentated, what are the memory usage patterns)</li>
</ul>
<p>So we should define <em>fault models</em> for different resources in our distributed system<sup class="footnote-reference"><a href="#tigerbeetle">4</a></sup>, i.e. a specification of how our application handles different failures.</p>
<p>Clever design (including API), code quality assurance (including configuration changes tests<sup class="footnote-reference"><a href="#configuration">5</a></sup>), proper algorithms, performance tuning, application monitoring, best DevSecOps practices, business and tech metrics collection significantly improves availability and should be considered first before introducing complexity of a distribution.</p>
<div class="footnote-definition" id="kleppmann"><sup class="footnote-definition-label">1</sup>
<p>Martin Kleppmann <a href="https://arxiv.org/abs/1509.05393">A Critique of the CAP Theorem</a></p>
</div>
<div class="footnote-definition" id="gcp"><sup class="footnote-definition-label">2</sup>
<p>Google Cloud Architecture Framework <a href="https://cloud.google.com/architecture/framework/reliability/principles">Reliability principles</a></p>
</div>
<div class="footnote-definition" id="files-are-hard"><sup class="footnote-definition-label">3</sup>
<p>An eyes opening reading for the author was <a href="https://danluu.com/deconstruct-files/">Files are fraught with peril</a> by Dan Luu - how difficult and error-prone is to use File API and how weak in terms of error-handling many filesystems are. General advice is to rely on already robust and battle-tested products like SQLite (which handles different edge cases) if you need some local persistent storage.</p>
</div>
<div class="footnote-definition" id="tigerbeetle"><sup class="footnote-definition-label">4</sup>
<p>See for an example the <a href="https://github.com/tigerbeetledb/tigerbeetle/blob/main/docs/DESIGN.md#fault-models">Design Document</a> of TigerBeetle.</p>
</div>
<div class="footnote-definition" id="configuration"><sup class="footnote-definition-label">5</sup>
<p>see Dan Luu’s <a href="https://danluu.com/postmortem-lessons/">Reading postmortems</a></p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="distributed-vs-decentralized"><a class="header" href="#distributed-vs-decentralized">Distributed vs Decentralized</a></h1>
<blockquote>
<p>Decentralized network is a dispersed network having several or multiple large hubs &lt;..&gt; and no dominant central hub.
<a href="https://www.oxfordreference.com/search?q=decentralized&amp;searchBtn=Search&amp;isQuickSearch=true">Oxford Dictionary of Media and Communication</a></p>
</blockquote>
<p>Consider <a href="https://github.com/donnemartin/system-design-primer#master-slave-replication">master-slave replication</a> of database. We have some slave databases running only read requests and a master database server executing read and writes queries and replicating all changes to slaves. Clearly this system is distributed due to the replication link. If we had no mechanism of promoting slave to master in case of the master’s failure, then our system is not decentralized.</p>
<p>So decentralization insreases fault-tolerance removing single point of failure. But there is also a catch. Consider two network topologies: Mesh (in case of a full decentralization) and Star (with a central master).</p>
<p><img src="introduction/images/star_mesh.svg" alt="Mesh vs Star" /></p>
<p>So in the case of <code>n</code> nodes of mesh network topology we have <code>n*(n-1)/2</code> connections[^graph] while in the case of the star network we have only <code>n-1</code> connections. So heavily meshed distributed systems produce increasing network contention.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="taste-of-distributed"><a class="header" href="#taste-of-distributed">Taste of distributed</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="exercises"><a class="header" href="#exercises">Exercises</a></h1>
<ol>
<li>
<p>Due to growing traffic we decided to shard users data by a starting letter of last name. Can we consider such a sharded database as a distributed system? Explain your answer.</p>
</li>
<li>
<p>Model packet loss in the network</p>
</li>
<li>
<p>Implement interface for TUN device</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="established-systems"><a class="header" href="#established-systems">Established systems</a></h1>
<blockquote>
<p><em>Successful software is composed not built.</em>
Roger Johansson, creator of ProtoActor</p>
</blockquote>
<p>Implementing distributed systems right way is <a href="https://ferd.ca/lessons-learned-while-working-on-large-scale-server-software.html">hard</a>. In most cases we can compose our software within well established distributed systems. Of course, the goal of the book is to learn how to implement such systems from scratch. But we should be familiar with other options. Some are listed below in the order of decreasing technology lock-in.</p>
<ul>
<li>Erlang/OTP</li>
<li>ETCD</li>
<li>Tendermint</li>
<li>Kubernetes</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="battle-tested-erlangotp"><a class="header" href="#battle-tested-erlangotp">Battle-tested Erlang/OTP</a></h1>
<blockquote>
<p><em>Any sufficiently complicated concurrent program in another language contains an ad hoc informally-specified bug-ridden slow implementation of half of Erlang.</em>
<a href="https://rvirding.blogspot.com/2008/01/virdings-first-rule-of-programming.html">Robert Virding</a>, one of the creators of Erlang</p>
</blockquote>
<p><a href="https://www.erlang.org">Erlang</a> still remains to be a unique fusion of practical engineering and clever architectural vision. Created in 1980s, it still has such a great potential to evolve in a modern web[^klarna]<sup class="footnote-reference"><a href="#my_experience">1</a></sup>.</p>
<p>We won’t dive in the language per se and pragmatic ideas of “let it fail”, <a href="https://adoptingerlang.org/docs/development/supervision_trees/">supervision trees</a>, and fault tolerance. You can read the very concise and full of practical wisdom <a href="https://erlang.org/download/armstrong_thesis_2003.pdf">thesis</a> (highly recommended) of Joe Armstrong, one of the Erlang creators.</p>
<p>Let’s focus more on Erlang distribution capabilities. Erlang is compiled to run in a virtual machine called BEAM<sup class="footnote-reference"><a href="#lumen">2</a></sup>. <a href="https://elixir-lang.org/">Elixir</a> is also a BEAM-runnable language with interoperability with Erlang.</p>
<p>Erlang lightweight processes, while executing application logic, communicate with each other using signals. Most used signal type is a message<sup class="footnote-reference"><a href="#actor">3</a></sup>. Processes are scheduled for execution by BEAM. You can run millions of processes<sup class="footnote-reference"><a href="#erlang_limits">4</a></sup>. OTP is a collection of reusable components (abstractions for concurrent and distributed patterns such as client-server). So Erlang/OTP is a framework allowing you to quickly create complex concurrent and distributed systems.</p>
<p>BEAM (written in C) can be extended with dynamically loaded compiled modules with Native Implemented Functions (<a href="https://www.erlang.org/doc/tutorial/nif.html">NIFs</a>). So you can write this shared module in a language you prefer (supporting C interoperability, of course)<sup class="footnote-reference"><a href="#rustler">5</a></sup>.<br />
Erlang is primarily well suited for a massive IO-bound load so for CPU-bound tasks you should use, for example, above mentioned NIFs<sup class="footnote-reference"><a href="#erlang_io_bound">6</a></sup>.</p>
<p>Every node (Erlang VM) to form a cluster should share the same cookie file with a secret. It is rather a basic “security” with the aim to differentiate two or more clusters.
Every Erlang VM is started with a predefined name and then it’s enough to register the rest <code>n-1</code> nodes on the first node. All nodes sharing the same cookie will propagate connections to each other creating a fully connected mesh network. This default transitive connection propagation can be configured – a node called <em>hidden node</em> without transitive connections can be used to create clusters with less connections<sup class="footnote-reference"><a href="#erlang_distribution">7</a></sup>.</p>
<p>By default, communication between nodes of a cluster is done over TCP.  Separate daemon process (called EPMD - <a href="https://www.erlang.org/doc/man/epmd.html">Erlang Port Mapper Daemon</a>) starts (if not already running) on every host machine with Erlang VMs. EPMD uses DNS to resolve node names to ip addresses and maps node names to ip+port (tcp socket). EPMD serves as a name resolver for nodes on the host machine.</p>
<p><img src="established-systems/images/erlang.svg" alt="Erlang" /></p>
<p>You can also implement your own procedures for <a href="https://www.erlang.org/doc/apps/erts/alt_disco.html">nodes discovery</a> and discovery under <a href="https://contactchanaka.medium.com/erlang-cluster-peer-discovery-on-kubernetes-aa2ed15663f9">container</a> orchestrator.</p>
<p>Default Erlang distribution with cookies assumes trusted network so you should change default communication mechanism in case of untrusted network<sup class="footnote-reference"><a href="#epmdless">8</a></sup>. Moreover, large number of nodes with fully connected mesh communicating over large and uncontrolled network can be prohibitatively costly. This break point may range from 40 to 140 nodes<sup class="footnote-reference"><a href="#erlang_nodes">9</a></sup> depending on load and amount of global state required to sync over cluster (such as a process namespace or getting <code>now</code> time which requires global lock to provide monotonically increasing time over the cluster). In such cases federated<sup class="footnote-reference"><a href="#federated">10</a></sup> clusters and partitioning of global state in separate groups of nodes inside a cluster is a way to go<sup class="footnote-reference"><a href="#erlang_scale">11</a></sup>.</p>
<p>Erlang is actively modernized and continuosly developed. So it’s a solid foundation for a distributed system.</p>
<p><strong>Erlang lessons to go distributed</strong>:</p>
<ul>
<li>separation of concerns and modularity - you can configure your communication transport, algorithm of node discovery, network topology;</li>
<li>distributed system must be observable (Erlang has excellent tracing and monitoring <a href="https://www.erlang.org/doc/man/observer.html">tools</a> allowing to observe even specific Erlang processes);</li>
<li>communication is asynchronous so no node has to wait any acknowledgement that its message was received by another one;</li>
<li>message passing is location transparent (the code to send message to local Erlang process is the same as for sending to a process on another node in the cluster – at a cost of more RAM and time to <code>memcpy</code> as every message is deeply copied);</li>
<li>maintaining global mutable data (namespace of lightweight processes in case of Erlang) and full connectivity severely limits scalability.</li>
<li>fail-fast - correctness is more important than availability (of course, depends on the startup time). Erlang philosophy denies defensive programming (when you try to recover from all errors). So assertions in the production code are beneficial - they declare negative flow and don’t allow the distributed system (which is designed to be fault tolerant) to behave incorrectly<sup class="footnote-reference"><a href="#tigerbeetle">12</a></sup>.</li>
</ul>
<div class="footnote-definition" id="klarna"><sup class="footnote-definition-label">13</sup>
<p>For example, Swedish fintech Klarna uses Erlang as it’s core platform handling 2 million transactions per day - look at their <a href="https://jobs.lever.co/klarna?team=Engineering">job descriptions</a>.</p>
</div>
<div class="footnote-definition" id="my_experience"><sup class="footnote-definition-label">1</sup>
<p>At one of my work places I almost convinced my CTO to write IO-bound service for proxying media streams and unary requests in Erlang. For two weeks I read everything on Erlang and finally presented a workable version which was deployed to production. It had worked under production for about 3 weeks till the CTO had a look at the code. He was rather afraid of completely non-imperative style of code and inability to scale his Erlang team (consisted of only me). So he gently asked me to rewrite the app in Go. For those brave of you <a href="https://adoptingerlang.org/">Adopting Erlang</a>.</p>
</div>
<div class="footnote-definition" id="lumen"><sup class="footnote-definition-label">2</sup>
<p>Alternative execution environments (including not only VMs) emerge periodically but I haven’t heard about any production-ready. BEAM is really <a href="https://blog.stenmans.org/theBeamBook/">complicated</a> to reinvent. See also <a href="https://github.com/lumen/lumen">Lumen</a>.</p>
</div>
<div class="footnote-definition" id="actor"><sup class="footnote-definition-label">3</sup>
<p>A lot of holy wars around considering Erlang as an actor language. See <a href="https://softwareengineering.stackexchange.com/questions/277464/is-erlang-really-an-actor-model-language">Stack Exchange question</a> and <a href="http://erlang.org/pipermail/erlang-questions/2014-June/079794.html">Robert Virding’s email</a>.</p>
</div>
<div class="footnote-definition" id="erlang_limits"><sup class="footnote-definition-label">4</sup>
<p>See also <a href="http://erlang.org/documentation/doc-5.8.4/doc/efficiency_guide/advanced.html">http://erlang.org/documentation/doc-5.8.4/doc/efficiency_guide/advanced.html</a></p>
</div>
<div class="footnote-definition" id="rustler"><sup class="footnote-definition-label">5</sup>
<p>See <a href="https://github.com/rusterlium/rustler">Rustler</a></p>
</div>
<div class="footnote-definition" id="erlang_io_bound"><sup class="footnote-definition-label">6</sup>
<p><a href="https://news.ycombinator.com/item?id=15558051">Why we used Pony to write Wallaroo</a>, <a href="https://stackoverflow.com/questions/32846615/what-is-the-best-way-of-doing-computationally-intensive-tasks-in-erlang-w-o-scal"></a></p>
</div>
<div class="footnote-definition" id="erlang_distribution"><sup class="footnote-definition-label">7</sup>
<p><a href="https://www.erlang.org/doc/reference_manual/distributed.html">Distributed Erlang</a></p>
</div>
<div class="footnote-definition" id="epmdless"><sup class="footnote-definition-label">8</sup>
<p>See also <a href="https://github.com/tsloughter/epmdless">epmdless</a>, <a href="https://www.erlang.org/doc/apps/ssl/ssl_distribution.html">Using TLS for Erlang Distribution</a></p>
</div>
<div class="footnote-definition" id="federated"><sup class="footnote-definition-label">10</sup>
<p>Federation is a technique to scale software by grouping its parts by feature. For example, you can federate database in separate servers: one for sessions, second for users, third for sales etc. Increased throughput comes with cost of joining data and holding transactions on the application side.</p>
</div>
<div class="footnote-definition" id="erlang_nodes"><sup class="footnote-definition-label">9</sup>
<p><a href="https://arxiv.org/pdf/1704.07234.pdf">Scaling Reliably: Improving the Scalability of the Erlang Distributed Actor Platform</a></p>
</div>
<div class="footnote-definition" id="erlang_scale"><sup class="footnote-definition-label">11</sup>
<p>See <a href="https://arxiv.org/pdf/1704.07234.pdf">Scaling Reliably: Improving the Scalability of the Erlang Distributed Actor Platform</a>, <a href="https://www.infoq.com/presentations/erland-scale-10000-nodes/">Scaling Erlang Cluster to 10,000 Nodes</a>, <a href="https://stackoverflow.com/questions/5044574/how-scalable-is-distributed-erlang">Stackoverflow question</a></p>
</div>
<div class="footnote-definition" id="tigerbeetle"><sup class="footnote-definition-label">12</sup>
<p>See also Joran Dirk Greef <a href="https://www.youtube.com/watch?v=w3WYdYyjek4">TigerStyle! (Or How To Design Safer Systems in Less Time)</a></p>
</div>
<div style="break-before: page; page-break-before: always;"></div><p>Martin Kleppman Critique CAP</p>
<p>latency-sensitivity framework</p>
<p>availability as a metric</p>
<p>operational and network latency</p>
<p>algorithm sensitivity to latency</p>
<p>communication patterns</p>
<ul>
<li>unicast (receiver - sender)</li>
<li>broadcast (sender to all possible receivers)</li>
<li>multicast (sender to a selected group of receivers)</li>
<li>convergecast (a group of senders to a receiver)</li>
</ul>
<p>Supermajority (2/3) vs simple majority</p>
<p>Network partitions <em>can be modelled as large packet delays (up to the duration of the partition), provided that the duration of the partition is finite and lost packets are retransmitted an unbounded number of times</em><sup class="footnote-reference"><a href="#kleppmann">1</a></sup>.</p>
<div class="footnote-definition" id="kleppmann"><sup class="footnote-definition-label">1</sup>
<p>Martin Kleppmann <a href="https://arxiv.org/abs/1509.05393">A Critique of the CAP Theorem</a></p>
</div>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="ml-training"><a class="header" href="#ml-training">ML training</a></h1>
<p>Machine learning involves many matrix operations and is naturally parallelized not only within single node but also over distributed nodes. Out-of-box solutions like <a href="https://www.tensorflow.org/guide/distributed_training">Distributed training with TensorFlow</a> transfer parameters (aka weights) from parameters nodes to worker nodes and back during model training. But large parameters matrices for sparse data heavily consume network bandwith and severely decrease model training speed<sup class="footnote-reference"><a href="#twitter">1</a></sup>.</p>
<p>Sparse data means having many null values. For example, <em>unpacked</em> data batch <code>X</code> looks like</p>
<pre><code class="language-ignore">[[0, 0, .., 0, 9], 
 [5,0, .., 0, 34], 
 ...
 [0, .., 720, 14]]
</code></pre>
<p>where total number of rows is a batch size <code>m</code> and each features row is about 2^20 values (yes, it’s a Twitter’s scale).</p>
<p>So the first layer of the network requires 2^20 rows in its parameters matrix <code>W</code> consisting of <code>float32</code> numbers (4 bytes each) and it’s number of columns depends on the next layer size, typically 50 - 400 in case of Twitter. So this results in first layer matrices of
<code>50 * 2^20  * (4*2^-20) Mb = 200 Mb</code> to <code>400 * 2^20  * (4*2^-20) Mb = 1600 Mb</code>. When you have a lot of worker nodes exhanging gigabyte of data each with parameters servers, your network bandwith is in danger. While first layer is huge, other layers are considerably smaller.</p>
<p>Twitter approaches this scalability problem with a clever nodes organization<sup class="footnote-reference"><a href="#approach">2</a></sup>.</p>
<p>Assume we have <code>K</code> worker nodes, <code>P</code> parameters nodes, and <code>n</code> features in a dataset row.
Then if we break the weights matrix of the first (sparse) layer in <code>P</code> submatrices by features (by columns):</p>
<p><code>X * W</code> = <code>X</code><sub>1</sub><code> * W</code><sub>1</sub> + .. + <code>X</code><sub>P</sub><code> * W</code><sub>P</sub></p>
<p>then each worker node should only work with block of input <code>X</code><sub>i</sub> and block of weights matrix <code>W</code><sub>i</sub>.
Each parameters server <code>i</code> is responsible for i<sup>th</sup> partition <code>W</code><sub>i</sub> of the sparse first layer.</p>
<p>Each worker node runs two processes with the following pseudocode:</p>
<p>Data unpacking and partitioning:</p>
<pre><code class="language-ignore">const m // batch size
const P // number of partitions of the sparse layer

fn process_input() {
    loop {
        batch = receive_input_batch(m) // batch of size m
        for i in 0..P {
            submatrix = unpack_submatrix_i_of_features(batch, i) // with m rows and n/P columns
            send_this_submatrix_to_parameters_server(submatrix, i) // send to server i
        }
    }
}
</code></pre>
<p>Reconstructing output layer of the first sparse layer and training rest layers:</p>
<pre><code class="language-ignore">const P // number of partitions of the sparse layer

fn train_rest_of_layers() {
    loop {
        output_layer // product XW of size m rows (batch size) and n columns (number of features)
        for i in 0..P {
            output_layer += receive_output_submatrix_from_parameters_server(i) // product of block of X and block of W from parameters server i
        }
        calculate_other_layers_of_network(output_layer)
    }
}
</code></pre>
<p>Because the second and further layers are much smaller than the first “sparse” layer, each worker node has these layers locally.</p>
<p>Each parameters node <code>i</code> runs the following process:</p>
<pre><code class="language-ignore">const node_number = i
const K // number of workers

fn train_first_layer() {
    loop {
        Wi // block i of weights matrix for the first sparse layer
        Xi = receive_submatrix_of_features(i)
        block_i = calculate_block_product(Xi, Wi)
        for j in 0..K {
            send_output_layer_block_to_worker(block_i, j) // send to worker j
        }
    }
}
</code></pre>
<p><img src="computing/images/twitter.svg" alt="Twitter ML cluster" /></p>
<p>Such a cluster organization allows for failure and restart of a worker node without loss of weights of the first layer (failure of a parameters node is more damaging). Each worker node is stateless and no transfer of a huge sparse matrix <code>W</code> occurs over network<sup class="footnote-reference"><a href="#results">3</a></sup>.</p>
<div class="footnote-definition" id="twitter"><sup class="footnote-definition-label">1</sup>
<p><a href="https://blog.twitter.com/engineering/en_us/topics/insights/2020/distributed-training-of-sparse-machine-learning-models-1">Distributed training of sparse ML models — Part 1: Network bottlenecks</a></p>
</div>
<div class="footnote-definition" id="approach"><sup class="footnote-definition-label">2</sup>
<p><a href="https://blog.twitter.com/engineering/en_us/topics/insights/2020/distributed-training-of-sparse-machine-learning-models-2">Distributed training of sparse ML models — Part 2: Optimized strategies</a></p>
</div>
<div class="footnote-definition" id="results"><sup class="footnote-definition-label">3</sup>
<p><a href="https://blog.twitter.com/engineering/en_us/topics/insights/2020/distributed-training-of-sparse-machine-learning-models-3">Distributed training of sparse ML models — Part 3: Observed speedups</a></p>
</div>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="blockchain"><a class="header" href="#blockchain">Blockchain</a></h1>
<p>Permissioned vs permisionless</p>
<p>TODO: Focus on consensus (POW, POS, POH) as a lesson for the book purposes</p>
<p>TPS (transactions per second)</p>
<p>A permissioneless blockchain as a solution to BFT</p>
<p>Blockchain network (also called cluster) is p2p network of nodes (called validators in Solana) exchanging with a copy of a ledger (blockchain). Typically 10 - 50 validators totaling 1000-2000 nodes<sup class="footnote-reference"><a href="#validators">1</a></sup></p>
<ul>
<li>distributed state transition requires consensus</li>
</ul>
<p>Replicated state machine, state transition is recorded as a block. The first state is the genesis block. State transition is done via applying a transaction. Several state transitions (i.e. transactions) are usually combined into a single block for time and space efficiency.
When several competing chains exist, we need to choose one (called <em>canonical chain</em>) via a consensus mechanism (PoW, PoS, PoA). Notion of finality.</p>
<p>Smart contracts are run on VM (Sealevel for Solana, EVM for Ethereum)</p>
<p>Client is a program communicating with a cluster via transactions (composed of several intructions in terms of solana).</p>
<p>Transactions are signed by the client by means of Public Key cryptography.</p>
<p>dApp -decentralized app is a UI (typically writen in some Javascript flavor) client</p>
<p>Node which appends new transaction to the ledger is an elected leader.</p>
<p>Token is a unit of payments for computing resources of the cluster (running smart contract or validating its output). You can invest some tokens (delegate a stake) into validator gain a reward. Validator takes some fee (commission) for their services (in bitcoin by including a transaction with 25 BTC out of nowhere<sup class="footnote-reference"><a href="#buterin">2</a></sup>. Growing validators can offer lower commission. It favors large validators to become even larger because lower fee insentives investors to delegate their stakes at a lower commission<sup class="footnote-reference"><a href="#validators oligopoly">3</a></sup>.</p>
<p>If validator behaves maliciously, you los
e your delegated tokens and also validator loses its delegated power and cannot earn more or even as before.</p>
<p>You can use a wallet which is a client allowing you to operate on your token account (send and receive).
To make stakes usually separate stake accounts are used. Solana: Tokens on the stake account can only be invested in the one validator the whole amount at one time. To invest to several validators simultaneously you should use several stake accounts.</p>
<p>How do you get your initial tokens to start? Crypto exchanges (like Binance) allow you to buy some tokens in exchange for a usual currency like US dollars.</p>
<p>Account is typically identified by public key.</p>
<p>Validators advertised their public key.</p>
<p>Bitcoin core can be used to build dApps</p>
<ul>
<li>with bitcoin scripting</li>
<li>with some metaprotocols requiring to use trusted nodes
Or you should invent your own blockchain</li>
</ul>
<p>Buterin suggested EVM to</p>
<p>Classical consenus requires all nodes to participates which prevents scalability.
So either some nodes (called validators) are selected to validate transactions or another way of consensus is suggested (probabilistic consensus of Bitcoin called Nakamoto consensus, probabilistic Avalanche consensus).
Or the topology of network is changed</p>
<ul>
<li>it is sharded by feature (DeFi blockchain, smart contracts etc) (Cosmos blockchain)</li>
<li>centralization - when there is central network to validate (Polkadot)</li>
<li>L2 (layer 2, also called sidechains)
<a href="https://jumpcrypto.com/writing/foray-into-scalability/">A Foray Into Blockchain Scalability</a></li>
</ul>
<p>In case of validators pool with classic consensus we need some voting mechanism to allow for more even participation (quadratic voting, https://wiki.polkadot.network/docs/learn-phragmen)</p>
<p>Byzantine Fault Tolerance (BFT, Tendermint) and Byzantine Agreement-based (Algorand) =&gt; limit the number of validators</p>
<p>51% attacks are real https://www.crypto51.app/</p>
<p>POW and POS tend to created concentrated pools which contradicts to decentralization</p>
<p>There are several proposed decentralization indices like <a href="https://nakaflow.io/">Nakamoto Index</a> or <a href="https://www.ed.ac.uk/informatics/blockchain/edi">Edinburgh Decentralisation Index</a>.
We will not delve deeply into specific methodologies but will name a few common subsystems being considered.</p>
<ul>
<li>(full) nodes distribution by geography and ownership, cloud providers and data centers</li>
<li>hardware distribution (by geography, vendor, architecture)</li>
<li>value owners distribution (by accounts, geography, amount of wealth)</li>
<li>codebase diversity<sup class="footnote-reference"><a href="#lang">4</a></sup></li>
<li>exhanges support</li>
<li>number of autonomous systems (AS)</li>
<li>wallets developers distribution</li>
<li>juridistiction contraints (e.g. ban on mining)</li>
<li>governance</li>
<li>code repository diversity (usually only GitHub)</li>
</ul>
<p>Any of such subsystems can become a bootleneck effectively reducing decentralization to very low level (actually the Nakamoto index measures the minimum number of parties to control 51% of the resources in any subsystem<sup class="footnote-reference"><a href="#nakamotoindex">5</a></sup>)</p>
<p>Permisionneless (public) blockchains</p>
<ul>
<li>Ethereum</li>
<li>Monero</li>
<li>Bitcoin
etc</li>
</ul>
<p>Permissioned blockchains to create CBDC (Cetral Bank Digital Currency, Interbanking communication - like SWIFT traditionally does) (not about decentralization)</p>
<ul>
<li>HyperledgerFabric by IBM/Linux Foundation</li>
<li>Corda by R3</li>
<li>atop Ethereum https://github.com/Consensys/quorum</li>
<li>with Polkadot Substrate</li>
<li>with Avalanche Evergreen</li>
</ul>
<p>Problem - grows of the blockchain data<sup class="footnote-reference"><a href="#blockchain_size">6</a></sup> in terms of hundreds of GBs. Notion of the succint blockchain (example of Mina)</p>
<div class="footnote-definition" id="validators"><sup class="footnote-definition-label">1</sup>
<p><a href="https://forums.solana.com/t/validator-information-thread/577/51">https://forums.solana.com/t/validator-information-thread/577/51</a></p>
</div>
<div class="footnote-definition" id="validators oligopoly"><sup class="footnote-definition-label">3</sup>
<p>See, for example, Solana’s validators market shares and commissions <a href="https://solanabeach.io/validators">https://solanabeach.io/validators</a></p>
</div>
<div class="footnote-definition" id="buterin"><sup class="footnote-definition-label">2</sup>
<p>(https://ethereum.org/en/whitepaper/)</p>
</div>
<div class="footnote-definition" id="projects"><sup class="footnote-definition-label">7</sup>
<p>https://courses.cfte.education/blockchain-and-defi-projects/</p>
</div>
<div class="footnote-definition" id="nakamotoindex"><sup class="footnote-definition-label">5</sup>
<p>See also Balaji S. Srinivasan <a href="https://news.earn.com/quantifying-decentralization-e39db233c28e">Quantifying Decentralization</a></p>
</div>
<div class="footnote-definition" id="lang"><sup class="footnote-definition-label">4</sup>
<p>Implementation languages also matter: niche ones (like Haskell or OCaml) or too low level ones (like C) can also prevent wider adoption by developers.</p>
</div>
<div class="footnote-definition" id="blockchain_size"><sup class="footnote-definition-label">6</sup>
<p>see <code>Blockchain Size</code> https://bitinfocharts.com/bitcoin/ for Bitcoin, https://etherscan.io/chartsync/chaindefault for Ethereum</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><p>Here are the list of references to cool articles and books etc I’ve used to prepare this book.</p>
<ul>
<li>Mikito Takada <a href="http://book.mixu.net/distsys/">Distributed systems: for fun and profit</a></li>
<li>Brendan Burns <a href="https://azure.microsoft.com/mediahandler/files/resourcefiles/designing-distributed-systems/Designing_Distributed_Systems.pdf">Designing Distributed Systems</a></li>
<li>Martin Kleppmann <a href="https://dataintensive.net/">Designing Data-Intensive Applications</a></li>
<li><a href="https://en.wikipedia.org/wiki/Web3">Wikipedia Web 3.0</a></li>
<li><a href="https://dhghomon.github.io/easy_rust/">Easy Rust</a></li>
<li><a href="https://doc.rust-lang.org/rust-by-example/">Rust by example</a></li>
<li><a href="https://github.com/donnemartin/system-design-primer">System design primer</a></li>
<li><a href="https://www.youtube.com/watch?v=hnpzNAPiC0E">Lisa Guo on scaling Instagram</a></li>
<li><a href="http://wiki.c2.com/?AlanKayOnMessaging">Re: prototypes vs classes was: Re: Sun’s HotSpot</a></li>
<li>Martin Kleppmann <a href="https://arxiv.org/pdf/1509.05393.pdf">A Critique of the CAP Theorem</a></li>
<li>Martin Logan, Eric Merritt, and Richard Carlsson <a href="https://livebook.manning.com/book/erlang-and-otp-in-action/chapter-8/1">Erlang and OTP in Action</a></li>
<li><a href="https://github.com/tsloughter/epmdless">https://github.com/tsloughter/epmdless</a></li>
<li><a href="https://contactchanaka.medium.com/erlang-cluster-peer-discovery-on-kubernetes-aa2ed15663f9">https://contactchanaka.medium.com/erlang-cluster-peer-discovery-on-kubernetes-aa2ed15663f9</a></li>
<li>Joe Armstrong <a href="https://erlang.org/download/armstrong_thesis_2003.pdf">Making reliable distributed systems in the presence of software errors</a></li>
<li><a href="https://www.erlang.org">https://www.erlang.org</a></li>
<li><a href="https://stackoverflow.com/questions/43173196/what-is-the-maximum-practical-number-of-nodes-in-an-erlang-system">https://stackoverflow.com/questions/43173196/what-is-the-maximum-practical-number-of-nodes-in-an-erlang-system</a></li>
<li><a href="https://stackoverflow.com/questions/5044574/how-scalable-is-distributed-erlang">https://stackoverflow.com/questions/5044574/how-scalable-is-distributed-erlang</a></li>
<li><a href="https://news.ycombinator.com/item?id=15558051">Why we used Pony to write Wallaroo</a></li>
<li><a href="https://adoptingerlang.org/">Adopting Erlang</a></li>
<li><a href="https://blog.stenmans.org/theBeamBook/">BEAM book</a></li>
<li><a href="https://stackoverflow.com/questions/32846615/what-is-the-best-way-of-doing-computationally-intensive-tasks-in-erlang-w-o-scal">https://stackoverflow.com/questions/32846615/what-is-the-best-way-of-doing-computationally-intensive-tasks-in-erlang-w-o-scal</a></li>
<li>Timmo Verlaan <a href="https://www.youtube.com/watch?v=F_YUyd_Qdjs">No(de) discovery without DNS &amp; EPMD - Code BEAM STO</a></li>
<li><a href="https://rvirding.blogspot.com/">Robert on anything</a></li>
<li>Phil Trinder et al <a href="https://arxiv.org/pdf/1704.07234.pdf">Scaling Reliably: Improving the Scalability of the Erlang Distributed Actor Platform</a></li>
<li><a href="https://www.infoq.com/presentations/erland-scale-10000-nodes/">Scaling Erlang Cluster to 10,000 Nodes</a></li>
<li><a href="https://softwareengineering.stackexchange.com/questions/277464/is-erlang-really-an-actor-model-language">https://softwareengineering.stackexchange.com/questions/277464/is-erlang-really-an-actor-model-language</a></li>
<li><a href="https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing">Fallacies of distributed computing</a></li>
<li>Fred Hebert <a href="https://ferd.ca/lessons-learned-while-working-on-large-scale-server-software.html">Lessons Learned while Working on Large-Scale Server Software</a></li>
<li><a href="https://www.tensorflow.org/guide/distributed_training">Distributed training with TensorFlow</a></li>
<li><a href="https://blog.twitter.com/engineering/en_us/topics/insights/2020/distributed-training-of-sparse-machine-learning-models-1">Distributed training of sparse ML models — Part 1: Network bottlenecks</a></li>
<li><a href="https://blog.twitter.com/engineering/en_us/topics/insights/2020/distributed-training-of-sparse-machine-learning-models-2">Distributed training of sparse ML models — Part 2: Optimized strategies</a></li>
<li><a href="https://blog.twitter.com/engineering/en_us/topics/insights/2020/distributed-training-of-sparse-machine-learning-models-3">Distributed training of sparse ML models — Part 3: Observed speedups</a></li>
<li><a href="https://www.ibm.com/topics/what-is-blockchain">What is blockchain technology?</a></li>
<li>Mario Zupan <a href="https://blog.logrocket.com/how-to-build-a-blockchain-in-rust/">How to build a blockchain in Rust</a></li>
<li>Pascal Akunne <a href="https://blog.logrocket.com/guide-blockchain-consensus-protocols/">A guide to blockchain consensus protocols</a></li>
<li><a href="https://en.wikipedia.org/wiki/Ethereum">Ethereum</a></li>
<li>Satoshi Nakamoto <a href="https://bitcoin.org/bitcoin.pdf">Bitcoin: A Peer-to-Peer Electronic Cash System</a></li>
<li>Chase Barker <a href="https://solana.com/news/getting-started-with-solana-development">Getting Started with Solana Development</a></li>
<li><a href="https://www.youtube.com/watch?v=4dNuMXBjpr0">Solana Core Concepts (Community Video)</a></li>
<li><a href="https://docs.solana.com">Solana Docs</a></li>
<li><a href="https://chorus.one/networks/solana/">https://chorus.one/networks/solana/</a></li>
<li>Felix Lutsch <a href="https://cvj.ch/en/education/basics/the-basics-of-staking/">The Basics of Staking</a></li>
<li>Satoshi Nakamoto <a href="https://bitcoin.org/bitcoin.pdf">Bitcoin: A Peer-to-Peer Electronic Cash System</a></li>
<li><a href="https://medium.com/chorus-one/the-launch-of-chorus-ventures-3b3bee21333">The Launch of Chorus Ventures</a></li>
<li>Nick Szabo <a href="https://www.fon.hum.uva.nl/rob/Courses/InformationInSpeech/CDROM/Literature/LOTwinterschool2006/szabo.best.vwh.net/idea.html">The Idea of Smart Contracts</a></li>
<li>Eddie Xie, Yuanjun Yang <a href="https://blog.twitter.com/engineering/en_us/topics/infrastructure/2021/how-we-built-twitter-s-highly-reliable-ads-pacing-service">How we built Twitter’s highly reliable ads pacing service</a></li>
<li><a href="https://habr.com/ru/company/vasexperts/blog/670964/">Взлетит или нет — две разные точки зрения на Web3</a></li>
<li><a href="https://www.ibm.com/cloud/learn/etcd">etcd</a></li>
<li><a href="https://etcd.io/">Etcd official website</a></li>
<li><a href="https://en.wikipedia.org/wiki/Network_throughput">Wikipedia Network throughput</a></li>
<li><a href="https://en.wikipedia.org/wiki/Network_congestion">Wikipedia Network congestion</a></li>
<li><a href="https://en.wikipedia.org/wiki/Goodput">Wikipedia Goodput</a></li>
<li><a href="https://en.wikipedia.org/wiki/Measuring_network_throughput">Wikipedia Measuring network throughput</a></li>
<li><a href="https://en.wikipedia.org/wiki/Latency_(engineering)">Wikipedia Latency (engineering)</a></li>
<li><a href="https://en.wikipedia.org/wiki/Network_bridge">Wikipedia Network bridge</a></li>
<li><a href="https://en.wikipedia.org/wiki/Network_delay">Wikipedia Network delay</a></li>
<li>Alex Diaconu <a href="https://ably.com/blog/8-fallacies-of-distributed-computing">Navigating the 8 fallacies of distributed computing</a></li>
<li><a href="https://www.aquasec.com/cloud-native-academy/kubernetes-101/kubernetes-complete-guide/">Kubernetes: Why Use It, How It Works, Options and Alternatives</a></li>
<li><a href="https://www.aquasec.com/cloud-native-academy/kubernetes-101/kubernetes-nodes/">Kubernetes Nodes: Components and Basic Operations</a></li>
<li><a href="https://www.rabbitmq.com/partitions.html">Clustering and Network Partitions</a></li>
<li>Martin Kleppmann <a href="https://arxiv.org/abs/1509.05393">A Critique of the CAP Theorem</a></li>
<li><a href="https://www.phoronix.com/scan.php?page=article&amp;item=bsd-linux-eo2021&amp;num=1">Benchmarks: FreeBSD 13 vs. NetBSD 9.2 vs. OpenBSD 7 vs. DragonFlyBSD 6 vs. Linux</a></li>
<li><a href="https://urbit.org">Urbit</a></li>
<li><a href="https://ethereum.org/en/whitepaper/">Ethereum Whitepaper</a></li>
<li><a href="https://urbit.org/blog/urbit-for-normies">Urbit for Normies</a></li>
<li><a href="https://confidentialcomputing.io/whitepaper-01-latest/">Confidential Computing: Hardware-Based Trusted Execution for Applications and Data</a></li>
<li><a href="https://confidentialcomputing.io/wp-content/uploads/sites/85/2022/01/CCC-A-Technical-Analysis-of-Confidential-Computing-v1.2.pdf">A Technical Analysis of Confidential Computing v1.2</a></li>
<li>Brian “Beej Jorgensen” Hall <a href="https://beej.us/guide/bgnet/html/">Beej’s Guide to Network Programming</a></li>
<li><a href="https://en.wikipedia.org/wiki/Network_interface_controller">Wikipedia Network interface controller</a></li>
<li><a href="https://en.wikipedia.org/wiki/Internet_protocol_suite">Wikipedia Internet protocol suite</a></li>
<li><a href="https://en.wikipedia.org/wiki/Routing_protocol">Wikipedia Routing protocol</a></li>
<li><a href="https://en.wikipedia.org/wiki/IPsec">Wikipedia IPsec</a></li>
<li><a href="https://en.wikipedia.org/wiki/Network_address_translation">Wikipedia Network address translation</a></li>
<li><a href="https://en.wikipedia.org/wiki/Private_network">Wikipedia Private network</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc1918">RFC 1918 Address Allocation for Private Internets</a></li>
<li><a href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing">Wikipedia Classless Inter-Domain Routing</a></li>
<li><a href="https://en.wikipedia.org/wiki/Subnetwork">Wikipedia Subnetwork</a></li>
<li><a href="https://en.wikipedia.org/wiki/Unique_local_address">Wikipedia Unique local address</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc4193">RFC 4193 Unique Local IPv6 Unicast Addresses</a></li>
<li><a href="https://en.wikipedia.org/wiki/UDP_hole_punching">Wikipedia UDP hole punching</a></li>
<li><a href="https://en.wikipedia.org/wiki/TCP_hole_punching">Wikipedia TCP hole punching</a></li>
<li><a href="https://en.wikipedia.org/wiki/Network_switch">Wikipedia Network switch</a></li>
<li><a href="https://en.wikipedia.org/wiki/End-to-end_principle">Wikipedia End-to-end principle</a></li>
<li><a href="https://en.wikipedia.org/wiki/Connectionless_communication">Wikipedia Connectionless communication</a></li>
<li><a href="https://en.wikipedia.org/wiki/CYCLADES">Wikipedia CYCLADES</a></li>
<li><a href="https://en.wikipedia.org/wiki/Port_forwarding">Wikipedia Port forwarding</a></li>
<li><a href="https://en.wikipedia.org/wiki/Internet_Protocol">Wikipedia Internet Protocol</a></li>
<li><a href="https://en.wikipedia.org/wiki/Interactive_Connectivity_Establishment">Wikipedia Interactive Connectivity Establishment</a></li>
<li><a href="https://en.wikipedia.org/wiki/IPv4_address_exhaustion">Wikipedia IPv4 address exhaustion</a></li>
<li><a href="https://en.wikipedia.org/wiki/Maximum_transmission_unit">Wikipedia Maximum transmission unit</a></li>
<li><a href="https://en.wikipedia.org/wiki/Address_Resolution_Protocol">Wikipedia Address Resolution Protocol</a></li>
<li><a href="https://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol">Wikipedia Dynamic Host Configuration Protocol</a></li>
<li><a href="https://en.wikipedia.org/wiki/Default_gateway">Wikipedia Default gateway</a></li>
<li><a href="https://en.wikipedia.org/wiki/Path_MTU_Discovery">Wikipedia Path MTU Discovery</a></li>
<li><a href="https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol">Wikipedia Internet Control Message Protocol</a></li>
<li><a href="https://en.wikipedia.org/wiki/Tunneling_protocol">Wikipedia Tunneling protocol</a></li>
<li><a href="https://en.wikipedia.org/wiki/Network_packet">Wikipedia Network packet</a></li>
<li><a href="https://en.wikipedia.org/wiki/Router_(computing)">Wikipedia Router (computing)</a></li>
<li><a href="https://en.wikipedia.org/wiki/Packet_switching">Wikipedia Packet switching</a></li>
<li><a href="https://en.wikipedia.org/wiki/Circuit_switching">Wikipedia Circuit switching</a></li>
<li><a href="https://en.wikipedia.org/wiki/QUIC">Wikipedia QUIC</a></li>
<li><a href="https://en.wikipedia.org/wiki/HTTP/3">Wikipedia HTTP/3</a></li>
<li><a href="https://en.wikipedia.org/wiki/HTTP/2">Wikipedia HTTP/2</a></li>
<li><a href="https://en.wikipedia.org/wiki/Default_gateway">Wikipedia Default gateway</a></li>
<li><a href="https://en.wikipedia.org/wiki/Time_to_live">Wikipedia Time to live</a></li>
<li><a href="https://en.wikipedia.org/wiki/Neighbor_Discovery_Protocol">Wikipedia Neighbor Discovery Protocol</a></li>
<li><a href="https://en.wikipedia.org/wiki/MAC_address">Wikipedia MAC address</a></li>
<li><a href="https://en.wikipedia.org/wiki/VoIP_gateway">Wikipedia VoIP gateway</a></li>
<li><a href="https://en.wikipedia.org/wiki/Gateway_(telecommunications)">Wikipedia Gateway (telecommunications)</a></li>
<li><a href="https://en.wikipedia.org/wiki/MAC_spoofing">Wikipedia MAC spoofing</a></li>
<li><a href="https://en.wikipedia.org/wiki/IP_address">Wikipedia IP address</a></li>
<li><a href="https://en.wikipedia.org/wiki/Berkeley_sockets">Wikipedia Berkeley sockets</a></li>
<li><a href="https://en.wikipedia.org/wiki/Ethernet">Wikipedia Ethernet</a></li>
<li><a href="https://en.wikipedia.org/wiki/Virtual_network_interface">Wikipedia Virtual network interface</a></li>
<li>Sami Niiranen <a href="http://www.saminiir.com/openvpn-puts-packets-inside-your-packets/">OpenVPN puts packets inside your packets</a></li>
<li><a href="https://www.kernel.org/doc/Documentation/networking/tuntap.txt">Universal TUN/TAP device driver</a></li>
<li><a href="https://community.openvpn.net/openvpn/wiki/309-what-is-the-difference-between-bridging-and-routing">FAQ: What is the difference between bridging and routing?</a></li>
<li>Yury Pitsishin <a href="https://codewithyury.com/demystifying-ifconfig-and-network-interfaces-in-linux/">Demystifying ifconfig and network interfaces in Linux</a></li>
<li><a href="http://www.aboutlinux.info/2006/11/ifconfig-dissected-and-demystified.html">Ifconfig Command - Explained in Detail</a></li>
<li><a href="https://docs.microfocus.com/NNMi/10.30/Content/Administer/NNMi_Deployment/Advanced_Configurations/Private_IP_Address_Range.htm">Private IP Address Ranges</a></li>
<li><a href="https://blog.apnic.net/2020/05/20/getting-ipv6-private-addressing-right/">Getting IPv6 private addressing right</a></li>
<li>Robert Greiner <a href="https://robertgreiner.com/cap-theorem-revisited/">CAP Theorem: Revisited</a></li>
<li><a href="https://en.wikipedia.org/wiki/Public_key_infrastructure">Wikipedia Public key infrastructure</a></li>
<li><a href="https://en.wikipedia.org/wiki/Virtual_private_network">Wikipedia Virtual private network</a></li>
<li><a href="https://en.wikipedia.org/wiki/Multicast">Wikipedia Multicast</a></li>
<li><a href="https://en.wikipedia.org/wiki/IP_multicast">Wikipedia IP multicast</a></li>
<li><a href="https://habr.com/ru/post/335436/">Автономный способ обхода DPI и эффективный способ обхода блокировок сайтов по IP-адресу</a></li>
<li><a href="http://www.saminiir.com/lets-code-tcp-ip-stack-1-ethernet-arp/">Let’s code a TCP/IP stack, 1: Ethernet &amp; ARP</a></li>
<li><a href="http://www.saminiir.com/lets-code-tcp-ip-stack-2-ipv4-icmpv4/">Let’s code a TCP/IP stack, 2: IPv4 &amp; ICMPv4</a></li>
<li><a href="http://www.saminiir.com/lets-code-tcp-ip-stack-3-tcp-handshake/">Let’s code a TCP/IP stack, 3: TCP Basics &amp; Handshake</a></li>
<li><a href="https://superuser.com/questions/1702867/routing-traffic-through-custom-tap-device-en-route-to-internet-on-linux">Routing traffic through custom tap device en-route to internet on linux</a></li>
<li><a href="https://serverfault.com/questions/1096942/two-tap-device-cant-communicate-over-bridge">Two tap device can’t communicate over bridge</a></li>
<li><a href="http://www.microhowto.info/howto/get_the_ip_address_of_a_network_interface_in_c_using_siocgifaddr.html">Get the IP address of a network interface in C using SIOCGIFADDR</a></li>
<li><a href="https://stackoverflow.com/questions/68423236/how-to-connect-a-tap-interface-to-the-internet">How to connect a tap interface to the internet?</a></li>
<li><a href="https://unix.stackexchange.com/questions/499548/how-to-read-data-from-tap-interface">How to read data from tap interface?</a></li>
<li>Graham Smith <a href="https://www.naturalborncoder.com/virtualization/2014/10/17/understanding-tun-tap-interfaces/">Understanding TUN TAP Interfaces</a></li>
<li><a href="https://www.cloudflare.com/learning/security/glossary/bgp-hijacking/">What is BGP hijacking?</a></li>
<li><a href="https://www.cloudflare.com/learning/network-layer/what-is-routing/">What is routing? | IP routing</a></li>
<li><a href="https://en.wikipedia.org/wiki/Ioctl">Wikipedia ioctl</a></li>
<li><a href="https://serverfault.com/questions/949945/ipv6-on-linux-tun-tap-ndp-not-working">IPv6 on Linux tun/tap: NDP not working</a></li>
<li>Herman J. Radtke III <a href="https://hermanradtke.com/2016/03/17/unions-rust-ffi.html/">Working with C unions in Rust FFI</a></li>
<li><a href="https://users.rust-lang.org/t/using-libc-ioctl-to-read-interface-flags/32506">Using libc::ioctl to read interface flags</a></li>
<li><a href="https://stackoverflow.com/questions/22496123/what-is-the-meaning-of-this-macro-iormy-macig-0-int">what is the meaning of this macro _IOR(MY_MACIG, 0, int)?</a></li>
<li>Ivan Ristić <a href="https://www.feistyduck.com/library/bulletproof-tls-guide/online/">Bulletproof TLS Guide</a></li>
<li><a href="https://www.kernel.org/doc/Documentation/ioctl/ioctl-number.txt">Ioctl Numbers</a></li>
<li><a href="https://www.gabriel.urdhr.fr/2021/05/08/tuntap/">TUN/TAP interface (on Linux)</a></li>
<li><a href="https://rust-lang.github.io/rust-bindgen/">The <code>bindgen</code> User Guide</a></li>
<li>Jonathan Corbet, Alessandro Rubini, and Greg Kroah-Hartman <a href="https://lwn.net/Kernel/LDD3/">Linux Device Drivers</a></li>
<li><a href="https://en.wikipedia.org/wiki/IPX/SPX">Wikipedia IPX/SPX</a></li>
<li><a href="https://en.wikipedia.org/wiki/AppleTalk">Wikipedia AppleTalk</a></li>
<li><a href="https://blog.container-solutions.com/linux-capabilities-why-they-exist-and-how-they-work">Linux Capabilities: Why They Exist and How They Work</a></li>
<li><a href="https://blog.container-solutions.com/linux-capabilities-in-practice">Linux Capabilities In Practice</a></li>
<li><a href="https://stackoverflow.com/questions/29099797/raw-capture-capabilities-cap-net-raw-cap-net-admin-not-working-outside-usr-b">Raw capture capabilities (CAP_NET_RAW, CAP_NET_ADMIN) not working outside /usr/bin and friends for packet capture program using libpcap</a></li>
<li>Carlos Polop <a href="https://book.hacktricks.xyz/welcome/readme">HackTricks</a></li>
<li><a href="https://habr.com/ru/company/first/blog/664010/">Неубиваемый P2P-интернет</a></li>
<li><a href="https://habr.com/ru/post/273523/">Еще одна «критическая» «уязвимость» «VPN» и почему Port Fail — ерунда</a></li>
<li><a href="https://habr.com/ru/post/276831/">Shodan собирал IPv6-адреса NTP-клиентов и сканировал их в ответ</a></li>
<li><a href="https://habr.com/ru/post/225539/">Как IPv6 помогает роутеры ломать</a></li>
<li><a href="https://habr.com/ru/post/168407/">TCP Congestion Control или Почему скорость прыгает</a></li>
<li>Moxie Marlinspike <a href="https://moxie.org/2022/01/07/web3-first-impressions.html">My first impressions of web3</a></li>
<li><a href="https://www.okx.com/academy/en/what-are-public-and-private-encryption-keys-crypto-wallets-explained">Cryptocurrency wallets and keys — an introduction to digital asset custody and security</a></li>
<li><a href="https://www.practicalnetworking.net/stand-alone/vpn-overlapping-networks/">VPN with Overlapping Networks</a></li>
<li><a href="https://stackoverflow.com/questions/5858655/linux-programmatically-up-down-an-interface-kernel">Linux programmatically up/down an interface kernel</a></li>
<li><a href="https://stackoverflow.com/questions/36715664/using-ip-what-does-lower-up-mean">Using ip, what does LOWER_UP mean?</a></li>
<li><a href="https://stackoverflow.com/questions/5815675/what-is-sock-dgram-and-sock-stream">What is SOCK_DGRAM and SOCK_STREAM?</a></li>
<li><a href="https://unix.stackexchange.com/questions/363730/what-is-a-generic-socket-and-how-does-it-relate-to-a-network-device">What is a generic socket and how does it relate to a network device?</a></li>
<li>Семенов Ю.А. <a href="http://book.itep.ru/4/44/rut_4411.htm">4.4.11 Протоколы маршрутизации (обзор, таблицы маршрутизации, вектор расстояния)</a></li>
<li>Семенов Ю.А. <a href="http://book.itep.ru/4/44/rip44111.htm">4.4.11.1 Внутренний протокол маршрутизации RIP</a></li>
<li><a href="https://www.practicalnetworking.net/stand-alone/tell-me-everything-that-happens-when-you-type-google-com-into-a-web-browser/">“Tell me everything that happens when you type google.com into a web browser”</a></li>
<li><a href="https://www.youtube.com/watch?v=YJGGYKAV4pA">How Data moves through the Internet - Networking Fundamentals</a></li>
<li><a href="https://habr.com/ru/company/karuna/blog/568702/">Что происходит, когда вводишь url, или как работает интернет</a></li>
<li><a href="https://launchpad.ethereum.org/en/faq">Validator FAQs</a></li>
<li><a href="https://github.com/tigerbeetledb/tigerbeetle/blob/main/docs/DESIGN.md">Design Document</a></li>
<li>Ed Harmoush <a href="https://github.com/alex/what-happens-when">What happens when…</a></li>
<li>Ed Harmoush <a href="https://www.practicalnetworking.net/series/packet-traveling/key-players/">Key Players</a></li>
<li>Ed Harmoush <a href="https://www.youtube.com/watch?v=QPi5Nvxaosw">ARP in 5 Minutes</a></li>
<li>Ed Harmoush <a href="https://www.practicalnetworking.net/series/arp/traditional-arp/">Traditional ARP</a></li>
<li>Ed Harmoush <a href="https://www.practicalnetworking.net/series/arp/proxy-arp/">Proxy ARP</a></li>
<li>Ed Harmoush <a href="https://www.youtube.com/watch?v=BWZ-MHIhqjM">What is Subnetting? - Subnetting Mastery - Part 1 of 7</a></li>
<li>Ed Harmoush <a href="https://www.youtube.com/watch?v=ljS07YTEJ2I">Drawing the Cheat Sheet - Subnetting Mastery - Part 2 of 7</a></li>
<li>Ed Harmoush <a href="https://www.youtube.com/watch?v=5-wlfAdcmFQ">How to solve ANY Subnetting Problems in 60 seconds or less - Subnetting Mastery - Part 3 of 7</a></li>
<li>Ed Harmoush <a href="https://www.youtube.com/watch?v=SM0kdVfhxZ0">Practice Examples - Subnetting Mastery - Part 4 of 7</a></li>
<li>Ed Harmoush <a href=""></a></li>
<li>Ed Harmoush <a href=""></a></li>
<li>Ed Harmoush <a href=""></a></li>
<li>Ed Harmoush <a href=""></a></li>
<li>Ed Harmoush <a href=""></a></li>
<li>Ed Harmoush <a href=""></a></li>
<li>Ed Harmoush <a href=""></a></li>
<li><a href="https://github.com/protocolbuffers/protobuf">Protocol Buffers - Google’s data interchange format</a></li>
<li><a href="https://github.com/secdev/scapy">Scapy</a></li>
<li><a href="https://capnproto.org">Cap’n Proto</a></li>
<li><a href="https://google.github.io/flatbuffers/">FlatBuffers</a></li>
<li><a href="https://engineering.fb.com/2015/07/31/android/improving-facebook-s-performance-on-android-with-flatbuffers/">Improving Facebook’s performance on Android with FlatBuffers</a></li>
<li><a href="https://google.github.io/flatbuffers/flexbuffers.html">FlexBuffers</a></li>
<li><a href="https://serde.rs/">Serde</a></li>
<li><a href="https://habr.com/ru/post/673110/">Сравнение гетерогенных блокчейнов (Cosmos, Polkadot, Avalanche)</a></li>
<li><a href="https://ru.wikipedia.org/wiki/%D0%90%D1%82%D0%B0%D0%BA%D0%B0_%D0%A1%D0%B8%D0%B2%D0%B8%D0%BB%D0%BB%D1%8B">Wikipedia Атака Сивиллы</a></li>
<li><a href="https://ethereum.org/en/whitepaper/">Ethereum Whitepaper</a></li>
<li><a href="https://en.wikipedia.org/wiki/Reed%27s_law">Wikipedia Reed’s law</a></li>
<li><a href="https://habr.com/ru/company/timeweb/blog/672494/">Как работает Wi-fi. Часть 1. История беспроводных сетей</a></li>
<li><a href="https://habr.com/ru/company/timeweb/blog/677452/">Как работает Wi-fi. Часть 2. Физический уровень</a></li>
<li><a href="https://blog.chain.link/blockchain-trust-model/">What Everyone Gets Wrong About Blockchains</a></li>
<li><a href="https://habr.com/ru/post/688076/">Что такое слои блокчейна L0, L1, L2 и L3 и зачем они нужны</a></li>
<li><a href="https://chorus.one/networks/ethereum/">About Staking on Ethereum</a></li>
<li><a href="https://habr.com/ru/post/703360/">Заблуждения программистов о времени</a></li>
<li><a href="https://developers.urbit.org/reference">Urbit Reference</a></li>
<li><a href="https://opentelemetry.io/docs/concepts/">Opentelemetry Concepts</a></li>
<li><a href="https://habr.com/ru/company/dcmiran/blog/699024/">TCP — плохой вариант для дата-центров. Встречайте новый протокол Homa</a></li>
<li><a href="https://research.google/pubs/pub48630/">Snap: a Microkernel Approach to Host Networking</a></li>
<li><a href="https://github.com/ethereumbook/ethereumbook">Mastering Ethereum, by Andreas M. Antonopoulos, Gavin Wood</a></li>
<li><a href="https://bitcoin.org/en/full-node">Running A Full Node</a></li>
<li>Andy Pavlo <a href="https://ottertune.com/blog/2022-databases-retrospective/">Databases in 2022: A Year in Review</a></li>
<li><a href="https://www.wsj.com/articles/blockchain-fails-to-gain-traction-in-the-enterprise-11671057528">Blockchain Fails to Gain Traction in the Enterprise</a></li>
<li><a href="https://www.r3.com/case-studies/spunta/">Fast and Transparent Interbank Reconciliation Powered by Distributed Ledger Technology</a></li>
<li><a href="https://habr.com/ru/post/709216/">Что такое блокчейн-мост и какие риски он в себе таит?</a></li>
<li><a href="https://habr.com/ru/post/709312/">VPN Gate, или — неубиваемая Великим Китайским Файрволом распределённая сеть VPN</a></li>
<li>Melissa E. O’Neill <a href="https://www.pcg-random.org/pdf/hmc-cs-2014-0905.pdf">PCG: A Family of Simple Fast Space-Efficient Statistically Good Algorithms for Random Number Generation</a></li>
<li><a href="https://www.r3.com/case-studies/spunta/">Fast and Transparent Interbank Reconciliation Powered by Distributed Ledger Technology</a></li>
<li><a href="https://cyberlab.pacific.edu/courses/cybr200/resources/08.09-cryptography-rng-entropy.pdf">Random Number Generation (Entropy)</a></li>
<li><a href="https://www.redhat.com/en/blog/understanding-random-number-generators-and-their-limitations-linux">Understanding random number generators, and their limitations, in Linux</a></li>
<li><a href="https://www.quora.com/How-does-a-true-random-number-generator-collect-entropy-data">How does a true random number generator collect entropy data?</a></li>
<li>Nick Sullivan <a href="https://blog.cloudflare.com/ensuring-randomness-with-linuxs-random-number-generator/">Ensuring Randomness with Linux’s Random Number Generator</a></li>
<li>Igor Adamenko <a href="https://uploadcare.com/blog/basics-of-the-internet/">Basics of the Internet</a></li>
<li>Igor Adamenko <a href="https://uploadcare.com/blog/tcp-udp/">TCP &amp; UDP, or the two pillars of the Internet</a></li>
<li>Igor Adamenko <a href="https://uploadcare.com/blog/ip/">Internet addressing</a></li>
<li>Igor Adamenko <a href="https://uploadcare.com/blog/bgp/">Where are the borders in the Internet?</a></li>
<li>Igor Adamenko <a href="https://uploadcare.com/blog/dns/">How DNS servers and resolvers work</a></li>
<li><a href="https://www.2uo.de/myths-about-urandom/">Myths about /dev/urandom</a></li>
<li><a href="https://habr.com/ru/post/710606/">SSU2 — транспортный протокол I2P нового поколения на базе UDP</a></li>
<li><a href="https://docs.victoriametrics.com/keyConcepts.html">VictoriaMetrics Key concepts</a></li>
<li><a href="https://dzone.com/articles/distributed-sql-an-alternative-to-sharding">Distributed SQL: An Alternative to Database Sharding</a></li>
<li>Marc Brooker <a href="https://aws.amazon.com/blogs/architecture/exponential-backoff-and-jitter/">Exponential Backoff And Jitter</a></li>
<li><a href="https://hackmd.io/@prysmaticlabs/finality">What Happens After Finality in ETH2?</a></li>
<li>Ognyan Chikov <a href="https://www.infoq.com/articles/creating-decentralized-apps/">The Process of Creating Decentralized Apps (dApps)</a></li>
<li>Dan Luu <a href="https://danluu.com/file-consistency/">Files are hard</a></li>
<li>Dan Luu <a href="https://danluu.com/deconstruct-files/">Files are fraught with peril</a></li>
<li>Dan Luu <a href="https://danluu.com/postmortem-lessons/">Reading postmortems</a></li>
<li>Dan Luu <a href="https://danluu.com/concurrency-bugs/">Notes on concurrency bugs</a></li>
<li><a href="https://ethos.dev/beacon-chain">The Beacon Chain Ethereum 2.0 explainer you need to read first</a></li>
<li><a href="https://www.youtube.com/watch?v=BH2jvJ74npM">TigerBeetle - A Million Financial Transactions per Second in Zig</a></li>
<li>Joran Dirk Greef <a href="https://www.youtube.com/watch?v=w3WYdYyjek4">TigerStyle! (Or How To Design Safer Systems in Less Time)</a></li>
<li><a href="https://www.youtube.com/watch?v=J1OaBRTV2vs">Interledger Community Call - 25 November 2020</a></li>
<li>Martin Thompson <a href="https://www.infoq.com/presentations/financial-exchange-architecture/">Evolution of Financial Exchange Architectures</a></li>
<li><a href="https://habr.com/ru/articles/683270/">Как концептуально работает Tornado Cash, который «забанили» власти США</a></li>
<li><a href="https://habr.com/ru/companies/pt/articles/735756/">Перехват трафика как вектор атаки на пользователей блокчейн-проектов</a></li>
<li>Preethi Kasireddy <a href="https://www.preethikasireddy.com/post/how-does-ethereum-work-anyway">How does Ethereum work, anyway?</a></li>
<li>Preethi Kasireddy <a href="https://www.preethikasireddy.com/post/how-does-the-new-ethereum-work">How does the NEW Ethereum work?</a></li>
<li><a href="https://ethereum.org/en/staking/dvt/">Distributed validator technology</a></li>
<li><a href="https://habr.com/ru/articles/743878/">Ethereum Contract ABI Specification. Взаимодействие с контрактом</a></li>
<li>Anton Ilinchik, Vishal Varshney <a href="https://engineering.zalando.com/posts/2023/07/all-you-need-to-know-about-timeouts.html">All you need to know about timeouts</a></li>
<li>Konstantinos Tsiaras <a href="https://dspace.lib.ntua.gr/xmlui/bitstream/handle/123456789/57592/Tsiaras_thesis.pdf?sequence=1">Study and Resource Analysis of Ethereum Execution Client Bootstrapping</a></li>
<li><a href="https://minaprotocol.com/blog/proof-of-work-vs-proof-of-stake">Proof-of-Work vs Proof-of-Stake</a></li>
<li><a href="https://minaprotocol.com/blog/how-ouroboros-samasika-upholds-minas-goals-of-decentralization">How Ouroboros Samasika Upholds Mina’s Goals of Decentralization</a></li>
<li>Brad Cohn, Evan Shapiro, and Emre Tekişalp <a href="https://minaprotocol.com/wp-content/uploads/economicsWhitepaper-2.pdf">Mina: Economics and Monetary Policy</a></li>
<li>Jeff Hodges <a href="https://www.somethingsimilar.com/2013/01/14/notes-on-distributed-systems-for-young-bloods/">Notes on Distributed Systems for Young Bloods</a></li>
<li><a href="https://courses.cfte.education/blockchain-and-defi-projects/">Blockchain and Digital Asset projects worldwide in 2023</a></li>
<li><a href="https://wiki.polkadot.network/docs">Polkadot documentation</a></li>
<li><a href="https://assets.polkadot.network/Polkadot-lightpaper.pdf">Polkadot light paper</a></li>
<li><a href="https://docs.substrate.io/">Substrate Documentation</a></li>
<li>Dr. Gavin Wood <a href="https://assets.polkadot.network/Polkadot-whitepaper.pdf">POLKADOT: VISION FOR A HETEROGENEOUS MULTI-CHAIN FRAMEWORK</a></li>
<li>Alvaro Videla <a href="https://alvaro-videla.com/2013/12/failure-modes-in-distributed-systems.html">Failure modes in distributed systems</a></li>
<li>Vaidehi Joshi <a href="https://medium.com/baseds/modes-of-failure-part-1-6687504bfed6">Modes of Failure (Part 1)</a></li>
<li>Vaidehi Joshi <a href="https://medium.com/baseds/modes-of-failure-part-2-4d050794be2f">Modes of Failure (Part 2)</a></li>
<li>Leslie Lamport <a href="https://amturing.acm.org/p558-lamport.pdf">Time, Clocks, and the Ordering of Events in a Distributed System</a></li>
<li><a href="https://en.wikipedia.org/wiki/Vector_clock">Wikipedia Vector clock</a></li>
<li>Bryan Fink <a href="https://riak.com/why-vector-clocks-are-easy/">Why Vector Clocks are Easy</a></li>
<li>Justin Sheehy <a href="https://riak.com/why-vector-clocks-are-hard/">Why Vector Clocks Are Hard</a></li>
<li>Giuseppe DeCandia et al <a href="https://www.allthingsdistributed.com/files/amazon-dynamo-sosp2007.pdf">Dynamo: Amazon’s Highly Available Key-value Store</a></li>
<li><a href="https://www.allthingsdistributed.com/files/amazon-distributed-computing-manifesto-1998.pdf">Distributed Computing Manifesto</a></li>
<li>Jonathan Ellis <a href="https://www.datastax.com/blog/why-cassandra-doesnt-need-vector-clocks">Why Cassandra Doesn’t Need Vector Clocks</a></li>
<li>Carlos Baquero, Nuno Preguiça <a href="https://queue.acm.org/detail.cfm?id=2917756">Why Logical Clocks are Easy</a></li>
<li>Barbara Simons, Jennifer Lundelius Welch and Nancy Lynch <a href="https://groups.csail.mit.edu/tds/papers/Lynch/lncs90-asilomar.pdf">An Overview of Clock Synchronization</a></li>
<li>Shihui Song <a href="http://www.scs.stanford.edu/14au-cs244b/labs/projects/song.pdf">Survey on Scalable Failure Detectors</a></li>
<li><a href="https://en.wikipedia.org/wiki/Lamport_timestamp">Wikipedia Lamport timestamp</a></li>
<li>Tushar Deepak Chandra and Sam Toueg <a href="http://courses.csail.mit.edu/6.852/08/papers/CT96-JACM.pdf">Unreliable Failure Detectors for Reliable Distributed Systems</a></li>
<li><a href="https://jumpcrypto.com/writing/foray-into-scalability/">A Foray Into Blockchain Scalability</a></li>
<li>Ivan Velichko <a href="https://iximiuz.com/en/posts/computer-networking-101/">Computer Networking Introduction: Ethernet and IP (Heavily Illustrated)</a></li>
<li>Ivan Velichko <a href="https://iximiuz.com/en/posts/bridge-vs-switch/">Bridge vs. Switch: What I Learned From a Data Center Tour</a></li>
<li>Ivan Velichko <a href="https://iximiuz.com/en/posts/laymans-iptables-101/">Illustrated introduction to Linux iptables</a></li>
<li>Thomas Graf <a href="https://cilium.io/blog/2018/04/17/why-is-the-kernel-community-replacing-iptables/">Why is the kernel community replacing iptables with BPF?</a></li>
<li>Jeremy Colvin <a href="https://isovalent.com/blog/post/why-replace-iptables-with-ebpf/">What is Kube-Proxy and why move from iptables to eBPF?</a></li>
<li>Manish Sampat <a href="https://cloudnativenow.com/topics/when-and-when-not-to-use-ebpf/">When (And When Not) to Use eBPF</a></li>
<li><a href="https://wiki.internetcomputer.org/wiki/Proof_of_Useful_Work">Proof of Useful Work</a></li>
<li><a href="https://learn.bybit.com/blockchain/nakamoto-coefficient-decentralization/">Nakamoto Coefficient: An Accurate Indicator for Blockchain Decentralization?</a></li>
<li>Jan Camenisch <a href="https://medium.com/dfinity/chain-key-technology-one-public-key-for-the-internet-computer-6a3644901e28">Chain Key Cryptography: The Scientific Breakthrough Behind the Internet Computer</a></li>
<li>The DFINITY Team <a href="https://internetcomputer.org/whitepaper.pdf">The Internet Computer for Geeks</a></li>
<li>Marek Majkowski <a href="https://idea.popcount.org/2017-01-06-select-is-fundamentally-broken/">Select is fundamentally broken</a></li>
<li>Marek Majkowski <a href="https://idea.popcount.org/2017-02-20-epoll-is-fundamentally-broken-12/">Epoll is fundamentally broken 1/2</a></li>
<li>Marek Majkowski <a href="https://idea.popcount.org/2017-03-20-epoll-is-fundamentally-broken-22/">Epoll is fundamentally broken 2/2</a></li>
<li>Rob Habermeier <a href="https://polkadot.network/blog/polkadot-v1-0-sharding-and-economic-security">Polkadot v1.0: Sharding and Economic Security</a></li>
<li>SPARTAN Research <a href="https://docsend.com/view/5vcmq86fg4wdqkf7">Bitcoin Layers: Tapestry of a Trustless Financial Era</a></li>
<li>Balaji S. Srinivasan <a href="https://news.earn.com/quantifying-decentralization-e39db233c28e">Quantifying Decentralization</a></li>
<li>Dimitris Karakostas, Aggelos Kiayias, and Christina Ovezik <a href="https://arxiv.org/pdf/2211.01291.pdf">SoK: A Stratified Approach to Blockchain Decentralization</a></li>
</ul>
<p>https://www.practicalnetworking.net/series/nat/nat/
https://www.practicalnetworking.net/series/arp/address-resolution-protocol/
https://www.practicalnetworking.net/stand-alone/communication-through-multiple-switches/
https://www.practicalnetworking.net/series/arp/gratuitous-arp/
https://www.practicalnetworking.net/series/arp/arp-probe-arp-announcement/
https://www.practicalnetworking.net/stand-alone/vlans/
https://www.practicalnetworking.net/stand-alone/eigrp-metric/
https://www.practicalnetworking.net/series/packet-traveling/packet-traveling/
https://www.practicalnetworking.net/series/packet-traveling/packet-traveling-series-finale/
https://www.practicalnetworking.net/series/packet-traveling/host-to-host-through-a-router/
https://www.practicalnetworking.net/series/packet-traveling/host-to-host/
https://www.practicalnetworking.net/series/packet-traveling/host-to-host-through-a-switch/
https://www.practicalnetworking.net/stand-alone/ethernet-wiring/
https://habr.com/ru/post/684524/
https://habr.com/ru/post/675812/
https://habr.com/ru/post/686230/</p>
<p>http://book.itep.ru/4/6/bitcoin.htm
http://book.itep.ru//4/6/blockchain.htm
http://book.itep.ru/5/cicl_54.htm
http://book.itep.ru/6/vlan_62.htm
http://book.itep.ru/6/fwal_63.htm
http://book.itep.ru/6/pgp_644.htm
http://book.itep.ru/6/ipsec.htm
http://book.itep.ru/10/sem_net.htm
http://book.itep.ru/4/44/ip6_4411.htm
http://book.itep.ru/4/44/tun_4412.htm
http://book.itep.ru/4/44/nd.htm
http://book.itep.ru/4/44/rtp_4492.htm
http://book.itep.ru/4/44/rtc_4493.htm
http://book.itep.ru/4/4/sip.htm
http://book.itep.ru/4/44/rut_4411.htm</p>
<p>https://blog.twitter.com/engineering/en_us/topics/insights/2021/simple-scalable-graph-neural-networks
https://blog.twitter.com/engineering/en_us/topics/insights/2021/fusing-elasticsearch-with-neural-networks-to-identify-data
https://blog.twitter.com/engineering/en_us/topics/infrastructure/2021/processing-billions-of-events-in-real-time-at-twitter-
https://blog.twitter.com/engineering/en_us/topics/insights/2021/graph-neural-networks-through-the-lens-of-differential-geometry-
https://blog.twitter.com/engineering/en_us/topics/insights/2022/graph-machine-learning-with-missing-node-features</p>
<p>https://blog.twitter.com/engineering/en_us/topics/open-source/2020/hunting-a-linux-kernel-bug</p>
<p>https://ethereum.org/en/developers/docs/evm/
https://ethereum.github.io/yellowpaper/paper.pdf
https://ethereum.org/en/developers/docs/
https://docs.soliditylang.org/en/v0.6.0/introduction-to-smart-contracts.html#the-ethereum-virtual-machine</p>
<p>https://habr.com/ru/company/yandex/blog/564510/</p>
<p>https://habr.com/ru/company/dsec/blog/278335/
https://habr.com/ru/post/168407/
https://habr.com/ru/post/430172/</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
